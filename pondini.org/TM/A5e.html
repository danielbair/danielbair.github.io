<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<meta content="iWeb 3.0.4" name="Generator"/>
<meta content="local-build-20130603" name="iWeb-Build"/>
<meta content="IE=EmulateIE7" http-equiv="X-UA-Compatible"/>
<meta content="width=800" name="viewport"/>
<title>Time Machine - Troubleshooting 
A5e.  How to Repair  Time  Machine  Backups
on a Network (NAS or Network Attached Storage) drive</title>
<link href="A5e_files/A5e.css" media="screen,print" rel="stylesheet" type="text/css"/>
<!--[if lt IE 8]><link rel='stylesheet' type='text/css' media='screen,print' href='A5e_files/A5eIE.css'/><![endif]-->
<!--[if gte IE 8]><link rel='stylesheet' type='text/css' media='screen,print' href='Media/IE8.css'/><![endif]-->
<script src="Scripts/iWebSite.js" type="text/javascript"></script>
<script src="Scripts/iWebImage.js" type="text/javascript"></script>
<script src="A5e_files/A5e.js" type="text/javascript"></script>
</head>
<body onload="onPageLoad();" style="background: rgb(213, 253, 208); margin: 0pt; ">
<div style="text-align: center; ">
<div id="body_content" style="margin-bottom: 10px; margin-left: auto; margin-right: auto; margin-top: 10px; overflow: hidden; position: relative; word-wrap: break-word;  background: rgb(255, 255, 255); text-align: left; width: 800px; "><div id="mirror-banner" style="background-color: #eceff1; width: 100%; margin-bottom: 1em; text-align: center; padding: 0.5em 0"> <p>This is an unofficial mirror of <a href="http://pondini.org">pondini.org</a> by James Pond, who is unfortunately <a href="http://www.beckerfamilyfuneral.com/obituary/3109691" title="Obituary">no longer with us</a>. </p> <p>All rights belong to James' beneficiaries.</p> <p>No guarantee is made about the accuracy or completeness of this mirror. </p></div>
<div id="nav_layer" style="float: left; margin-left: 0px; position: relative; width: 800px; z-index: 0; ">
<div class="bumper" style="height: 0px; line-height: 0px; "> </div>
<div class="spacer" style="clear: both; height: 0px; line-height: 0px; "> </div>
</div>
<div id="header_layer" style="height: 126px; margin-left: 0px; position: relative; width: 800px; z-index: 10; ">
<div class="bumper" style="height: 0px; line-height: 0px; "> </div>
<div class="style_SkipStroke shape-with-text stroke_0" id="id1" style="height: 82px; left: 14px; position: absolute; top: 44px; width: 771px; z-index: 1; ">
<div class="text-content style_External_769_80 vertical-align-middle-middlebox" style="padding: 1px; ">
<div class="style vertical-align-middle-innerbox">
<p class="paragraph_style" style="padding-top: 0pt; "><span class="style_1" style="line-height: 21px; ">Time Machine - Troubleshooting</span><span class="style_2" style="line-height: 27px; "> <br/></span></p>
<p class="paragraph_style_1">A5e.  How to <span class="style_3">Repair</span>  Time  Machine  Backups<br/></p>
<p class="paragraph_style_2" style="padding-bottom: 0pt; ">on a Network (NAS or Network Attached Storage) drive</p>
</div>
</div>
</div>
<div class="style_SkipStroke_1 shape-with-text stroke_1" id="id2" style="height: 30px; left: 37px; position: absolute; top: 9px; width: 718px; z-index: 1; ">
<div class="text-content graphic_textbox_layout_style_default_External_716_28" style="padding: 1px; ">
<div class="graphic_textbox_layout_style_default">
<p class="paragraph_style_3" style="padding-bottom: 0pt; padding-top: 0pt; "> <a href="A5d.html" title="A5d.html">Previous</a>        <a href="FAQ.html" title="FAQ.html">Frequently Asked Questions</a>        <a href="Home.html" title="Home.html">Home</a>     <a href="Troubleshooting.html" title="Troubleshooting.html">Troubleshooting</a>      <a href="Contact.html" title="Contact.html">Contact</a>      <a href="A6.html" title="A6.html">Next</a>  </p>
</div>
</div>
</div>
</div>
<div id="body_layer" style="margin-left: 0px; position: relative; width: 800px; z-index: 5; ">
<div class="bumper" style="height: 0px; line-height: 0px; "> </div>
<div class="style_SkipStroke_1 shape-with-text stroke_2" id="id3" style="height: 38px; left: 27px; position: absolute; top: 2869px; width: 772px; z-index: 1; ">
<div class="text-content style_External_770_36 vertical-align-middle-middlebox" style="padding: 1px; ">
<div class="style_4 vertical-align-middle-innerbox">
<p class="paragraph_style_4" style="padding-bottom: 0pt; padding-top: 0pt; "> <a href="A5d.html" title="A5d.html">Previous</a>         <a href="FAQ.html" title="FAQ.html">Frequently Asked Questions</a>        <a href="Home.html" title="Home.html">Home</a>        <a href="Troubleshooting.html" title="Troubleshooting.html">Troubleshooting</a>       <a href="Contact.html" title="Contact.html">Contact</a>        <a href="A6.html" title="A6.html">Next</a></p>
</div>
</div>
</div>
<div class="style_SkipStroke_3 shape-with-text" id="id4" style="height: 283px; left: 50px; position: absolute; top: 31px; width: 719px; z-index: 1; ">
<div class="text-content graphic_textbox_layout_style_default_External_719_283" style="padding: 0px; ">
<div class="graphic_textbox_layout_style_default">
<p class="paragraph_style_5" style="padding-top: 0pt; ">First, connect to your NAS via an <span class="style_5">Ethernet cable</span> if at all possible;  it will be 2-3 times faster than via wireless. <br/></p>
<div class="paragraph paragraph_style_6">If you're running 10.6.3 or later, you <span class="style_6">may</span> be able to<div class="tinyText style_SkipStroke_2 inline-block stroke_3" style="height: 131px; width: 274px;  clear: right; float: right; height: 131px; margin: 6px 0px 6px 6px; position: relative; width: 274px; "><img alt="" src="A5e_files/A5b%201%20TM%20Menubar%20menu%20w%3AOptions.jpg" style="border: none; height: 131px; width: 274px; "/></div> fix the backups by holding the <span class="style_6">Alt/Option</span> key while selecting the Time Machine icon in your menubar, and selecting the <span class="style_6">Verify Backups</span> option. <br/></div>
<p class="paragraph_style_5">Effective with Mountain Lion 10.8.x, if you're using multiple backup drives, this will verify the <span class="style_5">current</span> or <span class="style_5">most recent</span> backup drive only.  To verify a different one, either run (or start) a backup to the desired destination, or use the procedure below.<br/></p>
<p class="paragraph_style_5" style="padding-bottom: 0pt; ">If not, or if that doesn't work, use the following procedure:</p>
</div>
<div class="tinyText" style="clear: both; height: 0px; line-height: 0px; "> </div>
</div>
</div>
<div class="style_SkipStroke_4 shape-with-text stroke_4" id="id5" style="height: 814px; left: 60px; position: absolute; top: 2024px; width: 690px; z-index: 1; ">
<div class="text-content style_External_688_812" style="padding: 1px; ">
<div class="style_7">
<p class="paragraph_style_7" style="padding-top: 0pt; ">If Repair Disk fails:<br/></p>
<p class="paragraph_style_5">If Disk Utility says it can't repair the sparse bundle, look closely at the messages.  If it repaired some things, but not everything, run it again (and again) until it either repairs everything or can't repair any more.  <br/></p>
<p class="paragraph_style_6">If Disk Utility can't repair the sparse bundle, it's possible a heavy-duty 3rd-party disk repair app, such as  <a href="http://www.alsoft.com/" title="http://www.alsoft.com/">DiskWarrior</a>, can.  These are expensive (DiskWarrior is about $100), and probably a good investment for the future, but there's no guarantee it will work.  You must be able to "mount" the disk image by double-clicking the sparse bundle for these apps to be able to see and repair it.<br/></p>
<p class="paragraph_style_6">If you decide to do this, be <span class="style_8">sure</span> to use <span class="style_8">only</span> a version that's compatible with the version of OSX on your system.  (If you're not sure what version of OSX you're using, see <a href="http://pondini.org/OSX/OSXversion.html" title="http://pondini.org/OSX/OSXversion.html">What Version of OSX do I have?</a>)<br/></p>
<p class="paragraph_style_5"><br/></p>
<p class="paragraph_style_7">One Last Option:<br/></p>
<p class="paragraph_style_5">If you're comfortable with Terminal and UNIX, the procedure in this post <span class="style_6">might</span> be worth a try: <a href="http://blog.jthon.com/?p=31" title="http://blog.jthon.com/?p=31"> http://blog.jthon.com/?p=31</a>  It was written several years ago, and may or may not work in your situation, especially on later versions of OSX.  <br/></p>
<p class="paragraph_style_8">If you're out of options:<br/></p>
<p class="paragraph_style_5">You <span class="style_8">might</span> be able to recover some of the data, but it’s "iffy" and expensive.  See  <a href="../OSX/Recover.html" title="../OSX/Recover.html">Data Recovery</a> for the gory details.  But note that few, if any, such apps will work on a NAS.<br/></p>
<p class="paragraph_style_5">Otherwise, your only option is to erase the backups and let Time Machine start over.<br/></p>
<p class="paragraph_style_5">If there's nothing else on the NAS, use whatever tools are provided by the maker to erase or delete the disk, partition, share, or whatever it's called.<br/></p>
<p class="paragraph_style_5" style="padding-bottom: 0pt; ">If there is other data on the NAS, you may be able to delete the sparse bundle via the Finder.  That will take long time.  If it's extremely slow, you might be able to do it somewhat faster, via the procedure in the blue box of  <a href="TCQ5.html" title="TCQ5.html">#Q5 in Using Time Machine with a Time Capsule.</a></p>
</div>
</div>
</div>
<div class="style_SkipStroke_5 shape-with-text stroke_5" id="id6" style="height: 399px; left: 55px; position: absolute; top: 1576px; width: 700px; z-index: 1; ">
<div class="text-content style_External_698_397" style="padding: 1px; ">
<div class="style_9">
<div class="paragraph paragraph_style_9" style="padding-top: 0pt; ">When repairing a <div class="tinyText style_SkipStroke_2 inline-block stroke_3" style="height: 257px; width: 499px;  clear: right; float: right; height: 257px; margin: 6px 0px 6px 6px; position: relative; width: 499px; "><img alt="" src="A5e_files/A5b%203%20Disk%20Repair%20messages.jpg" style="border: none; height: 258px; width: 499px; "/></div><span class="style_6">sparse bundle</span>, the messages may not appear in the center area of the screen.  Click the <span class="style_10">Log</span> icon in the toolbar, or select <span class="style_10">Window &gt; Show Log</span> from the Menubar to display them.<br/></div>
<p class="paragraph_style_9"><br/></p>
<p class="paragraph_style_9">What you're looking for, of course, is the "appears to be ok" message.   If you get error messages instead, see the <span class="style_11">pink</span><span class="style_12"> </span>box below.<br/></p>
<p class="paragraph_style_9"><br/></p>
<p class="paragraph_style_9" style="padding-bottom: 0pt; ">Note that this log is kept on your Mac, so if you missed the messages, you can start Disk Utility again and go directly to them, without having to run <span class="style_6">Repair Disk</span> again.  Each task is separated by a row of asterisks.</p>
</div>
<div class="tinyText" style="clear: both; height: 0px; line-height: 0px; "> </div>
</div>
</div>
<div class="style_SkipStroke_6 shape-with-text stroke_6" id="id7" style="height: 1170px; left: 50px; position: absolute; top: 363px; width: 719px; z-index: 1; ">
<div class="text-content style_External_717_1168" style="padding: 1px; ">
<div class="style_13">
<p class="paragraph_style_5" style="padding-top: 0pt; "><span class="style_14" style="line-height: 27px; ">Use the </span><span class="style_15" style="line-height: 27px; ">Disk Utility</span><span class="style_16" style="line-height: 27px; "> app</span><span class="style_17">,</span><span class="style_10"> </span>in your Applications/Utilities folder (or type <span class="style_5">Disk Utility</span> into the Spotlight search box in your menubar).<br/></p>
<p class="paragraph_style_5">Backups made over a network are stored in a container called a <span class="style_6">sparse bundle disk image.</span>  <br/></p>
<p class="paragraph_style_5">Disk Utility can't see the NAS's internal HD directly, as it can an internal or external HD, but it <span class="style_6">may </span>be able to<span class="style_6"> </span>see the sparse bundle. <br/></p>
<p class="paragraph_style_5">If the<span class="style_10"> </span>sparse bundle containing your backups doesn't<span class="style_5"> </span>appear in Disk Utility's sidebar as below, open a Finder window, double-click the NAS in the sidebar, then locate the sparsebundle. If the server (NAS) isn't shown, from a Finder menubar, select <span class="style_6">Preferences &gt; Sidebar</span> and make sure the <span class="style_6">Connected Servers</span> box is checked.<br/></p>
<p class="paragraph_style_5"><br/></p>
<div class="paragraph paragraph_style_10">I can't tell you exactly what you'll <div class="tinyText style_SkipStroke_2 inline-block stroke_3" style="height: 190px; width: 441px;  clear: right; float: right; height: 190px; margin: 6px 0px 6px 6px; position: relative; width: 441px; "><img alt="" src="A5e_files/A5e%202%20Sparse%20Bundles%20via%20Finder%20.jpg" style="border: none; height: 190px; width: 441px; "/></div>see, as it depends on how each NAS maker does things, and perhaps how you've chosen to set it up.  Here's what it looks like (in <span class="style_6">Column View) </span>on a Time Capsule;  a NAS should be similar, but with different names, and likely with some other folders, etc., in between the NAS disk and sparse bundle(s):<br/></div>
<p class="paragraph_style_5">If you're backing-up more than one Mac to the NAS, there will be a separate sparse bundle for each Mac (the <span class="style_6">sparsebundle</span> suffix may not appear).  Drag the one you want from the Finder window to the lower part of <span class="style_10">Disk Utility's</span> sidebar.  It may take several moments for it to appear.<br/></p>
<p class="paragraph_style_11">If you can't see the sparse bundle via the Finder,<span class="style_18"> you'll have to use whatever procedures or utilities are provided by the maker of the NAS. <br/></span></p>
<div class="paragraph paragraph_style_11"><span class="style_18">Select the sparse </span><div class="tinyText style_SkipStroke_2 inline-block stroke_3" style="height: 417px; width: 537px;  clear: right; float: right; height: 417px; margin: 6px 0px 6px 6px; position: relative; width: 537px; "><img alt="" src="A5e_files/A5b%202%20Sparse%20bundle%20in%20Disk%20Utility.jpg" style="border: none; height: 418px; width: 537px; "/></div><span class="style_18">bundle in the sidebar, click the </span><span class="style_19">First Aid</span><span class="style_18"> tab near the top, then the </span><span class="style_19">Repair Disk</span><span class="style_18"> button.<br/></span></div>
<p class="paragraph_style_5">If the <span class="style_6">Repair Disk </span>button isn't enabled, and the "Time Machine Backups" disk image is shown below it, select the disk image  instead.<span class="style_18"><br/></span></p>
<p class="paragraph_style_5">Don't click the <span class="style_6">Verify Disk </span>button first;  if a problem is found, and you then click <span class="style_6">Repair Disk, </span>the entire verification is repeated!  <br/></p>
<p class="paragraph_style_9"><br/></p>
<p class="paragraph_style_9" style="padding-bottom: 0pt; ">(If you get a message that the sparse image is in use, or can’t be unmounted, see <a href="C12.html" title="C12.html">section #C12.</a>)</p>
</div>
<div class="tinyText" style="clear: both; height: 0px; line-height: 0px; "> </div>
</div>
</div>
<div class="spacer" style="height: 2907px; line-height: 2907px; "> </div>
</div>
<div id="footer_layer" style="height: 43px; margin-left: 0px; position: relative; width: 800px; z-index: 15; ">
<div class="bumper" style="height: 0px; line-height: 0px; "> </div>
<div class="style_SkipStroke_3 shape-with-text" id="id8" style="height: 22px; left: 721px; position: absolute; top: 10px; width: 70px; z-index: 1; ">
<div class="text-content graphic_textbox_layout_style_default_External_70_22" style="padding: 0px; ">
<div class="graphic_textbox_layout_style_default">
<p class="paragraph_style_12" style="padding-bottom: 0pt; padding-top: 0pt; ">6/3/13</p>
</div>
</div>
</div>
<div class="style_SkipStroke_3 shape-with-text" id="id9" style="height: 22px; left: 248px; position: absolute; top: 21px; width: 297px; z-index: 1; ">
<div class="text-content graphic_textbox_layout_style_default_External_297_22" style="padding: 0px; ">
<div class="graphic_textbox_layout_style_default">
<p class="paragraph_style_13" style="padding-bottom: 0pt; padding-top: 0pt; ">Copyright © 2013 James Pond.  All rights reserved.</p>
</div>
</div>
</div>
</div>
</div>
</div>
</body>
</html>
