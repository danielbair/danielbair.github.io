<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
<meta charset="utf-8" />
<title>development:scripts</title>
<meta name="generator" content="DokuWiki" />
<meta name="robots" content="index,follow" />
<meta name="keywords" content="development,scripts" />
<script src="/cdn-cgi/apps/head/_YVe0KD61Qzhc3-vM7qv9NlPLyE.js"></script><link rel="search" type="application/opensearchdescription+xml" href="/lib/exe/opensearch.php" title="KanyawTech.org" />
<link rel="start" href="/" />
<link rel="contents" href="/development/scripts?do=index" title="Sitemap" />
<link rel="alternate" type="application/rss+xml" title="Recent Changes" href="/feed.php" />
<link rel="alternate" type="application/rss+xml" title="Current namespace" href="/feed.php?mode=list&amp;ns=development" />
<link rel="alternate" type="text/html" title="Plain HTML" href="/_export/xhtml/development/scripts" />
<link rel="alternate" type="text/plain" title="Wiki Markup" href="/_export/raw/development/scripts" />
<link rel="canonical" href="http://kanyawtech.org/development/scripts" />
<link rel="stylesheet" type="text/css" href="/lib/exe/css.php?t=arctic&amp;tseed=8beba18783354693629669e7c712f0cf" />
<!--[if gte IE 9]><!-->
<script type="text/javascript">/*<![CDATA[*/var NS='development';var JSINFO = {"id":"development:scripts","namespace":"development","ga":{"trackingId":"UA-46551808-2","anonymizeIp":true,"action":"export_xhtml","trackOutboundLinks":false,"options":[],"pageview":"\/development\/scripts"}};
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="/lib/exe/jquery.php?tseed=23f888679b4f1dc26eef34902aca964f"></script>
<script type="text/javascript" charset="utf-8" src="/lib/exe/js.php?t=arctic&amp;tseed=8beba18783354693629669e7c712f0cf"></script>
<!--<![endif]-->
</head>
<body>
<div class="dokuwiki export">
<h3 class="sectionedit1" id="useful_python_scripts">Useful Python Scripts</h3>
<div class="level3">
<p>
<strong>Zero Width Space Inserter</strong>
</p>
<dl class="file">
<dt><a href="/_export/code/development/scripts?codeblock=0" title="Download Snippet" class="mediafile mf_py">kswinsert200b.py</a></dt>
<dd><pre class="code file python"><span class="co1">#!/usr/bin/env/ python3</span>
<span class="co1"># -*- coding: utf-8 -*-</span>
&nbsp;
prog_version <span class="sy0">=</span> <span class="st0">'1.1'</span>
&nbsp;
<span class="kw1">def</span> insert<span class="br0">&#40;</span>input_text<span class="sy0">,</span> insert_char <span class="sy0">=</span> <span class="st0">&quot;<span class="es0">\u</span>200b&quot;</span><span class="br0">&#41;</span>:
	<span class="st0">&quot;&quot;&quot;&quot;&quot;&quot;</span>
	karen_consonants <span class="sy0">=</span> <span class="kw2">set</span><span class="br0">&#40;</span><span class="st0">&quot;ကခဂဃငစဆၡဇညတထဒနပဖဘမယရလဝသဟအဧ&quot;</span><span class="br0">&#41;</span>
	<span class="co1"># Karen Consonants: before which we may insert a U+200b</span>
	karen_chars <span class="sy0">=</span> <span class="kw2">set</span><span class="br0">&#40;</span><span class="br0">&#123;</span><span class="kw2">chr</span><span class="br0">&#40;</span>x<span class="br0">&#41;</span> <span class="kw1">for</span> x <span class="kw1">in</span> <span class="kw2">range</span><span class="br0">&#40;</span><span class="nu0">4096</span><span class="sy0">,</span> <span class="nu0">4256</span><span class="br0">&#41;</span><span class="br0">&#125;</span><span class="br0">&#41;</span> | <span class="kw2">set</span><span class="br0">&#40;</span><span class="br0">&#123;</span><span class="kw2">chr</span><span class="br0">&#40;</span>x<span class="br0">&#41;</span> <span class="kw1">for</span> x <span class="kw1">in</span> <span class="kw2">range</span><span class="br0">&#40;</span><span class="nu0">43616</span><span class="sy0">,</span> <span class="nu0">43644</span><span class="br0">&#41;</span><span class="br0">&#125;</span><span class="br0">&#41;</span>
	<span class="co1"># Makes a set of all Myanmar characters</span>
&nbsp;
	opening_parentheses <span class="sy0">=</span> <span class="kw2">set</span><span class="br0">&#40;</span><span class="st0">&quot;([{&quot;</span><span class="br0">&#41;</span>
	<span class="co1"># parenthetic characters which may start a new line after karen text</span>
	closing_parentheses <span class="sy0">=</span> <span class="kw2">set</span><span class="br0">&#40;</span><span class="st0">&quot;)]}&quot;</span><span class="br0">&#41;</span>
	<span class="co1">#characters after which a line my break if directly followed by a Karen consonant</span>
&nbsp;
	input_text <span class="sy0">=</span> input_text.<span class="me1">replace</span><span class="br0">&#40;</span><span class="st0">&quot;<span class="es0">\u</span>200b&quot;</span><span class="sy0">,</span> <span class="st0">&quot;&quot;</span><span class="br0">&#41;</span>
	<span class="co1"># Note, even though we're making the insert_char changable for test purposes, replacing any random character that comes in would be dangerous. So we'll leave the replace part as \u200b.</span>
&nbsp;
&nbsp;
	output_text<span class="sy0">,</span> last_char <span class="sy0">=</span> <span class="br0">&#91;</span><span class="br0">&#93;</span><span class="sy0">,</span> <span class="st0">''</span>
	<span class="kw1">for</span> char <span class="kw1">in</span> input_text:
		<span class="kw1">if</span> char <span class="kw1">in</span> karen_consonants <span class="kw1">and</span> <span class="br0">&#40;</span>last_char <span class="kw1">in</span> karen_chars <span class="kw1">or</span> last_char <span class="kw1">in</span> closing_parentheses<span class="br0">&#41;</span>:
			output_text.<span class="me1">append</span><span class="br0">&#40;</span>insert_char + char<span class="br0">&#41;</span>
		<span class="kw1">elif</span> char <span class="kw1">in</span> opening_parentheses <span class="kw1">and</span> last_char <span class="kw1">in</span> karen_chars:
			output_text.<span class="me1">append</span><span class="br0">&#40;</span>insert_char + char<span class="br0">&#41;</span>
		<span class="kw1">else</span>:
			output_text.<span class="me1">append</span><span class="br0">&#40;</span>char<span class="br0">&#41;</span>
		last_char <span class="sy0">=</span> char
	output_text <span class="sy0">=</span> <span class="st0">''</span>.<span class="me1">join</span><span class="br0">&#40;</span>output_text<span class="br0">&#41;</span>
	corrections <span class="sy0">=</span> <span class="br0">&#40;</span>
		<span class="br0">&#40;</span><span class="st0">&quot;ခ{}ရံာ်&quot;</span><span class="sy0">,</span> <span class="st0">&quot;ခရံာ်&quot;</span><span class="br0">&#41;</span><span class="sy0">,</span>
		<span class="br0">&#40;</span><span class="st0">&quot;ပ{}တြၢၤ&quot;</span><span class="sy0">,</span> <span class="st0">&quot;ပတြၢၤ&quot;</span><span class="br0">&#41;</span><span class="sy0">,</span>
	<span class="br0">&#41;</span>
	<span class="kw1">for</span> old<span class="sy0">,</span> <span class="kw3">new</span> <span class="kw1">in</span> corrections:
		output_text <span class="sy0">=</span> output_text.<span class="me1">replace</span><span class="br0">&#40;</span>old.<span class="me1">format</span><span class="br0">&#40;</span>insert_char<span class="br0">&#41;</span><span class="sy0">,</span> <span class="kw3">new</span><span class="br0">&#41;</span>
	<span class="kw1">return</span> output_text
&nbsp;
<span class="kw1">def</span> test_insert<span class="br0">&#40;</span><span class="br0">&#41;</span>:
	<span class="kw1">import</span> <span class="kw3">unittest</span>
	<span class="kw1">class</span> TestSequenceFunctions<span class="br0">&#40;</span><span class="kw3">unittest</span>.<span class="me1">TestCase</span><span class="br0">&#41;</span>:
		<span class="kw1">def</span> test_basic<span class="br0">&#40;</span><span class="kw2">self</span><span class="br0">&#41;</span>:
			data <span class="sy0">=</span> <span class="st0">&quot;လံာ်စီဆှံအတၢ်ကွဲးအသးတဖၣ်န့ၣ်ဟဲလၢယွၤဆံးအါလဲၣ်.&quot;</span>
			<span class="kw2">self</span>.<span class="me1">assertEqual</span><span class="br0">&#40;</span><span class="st0">&quot;လံာ်-စီ-ဆှံ-အ-တၢ်-ကွဲး-အ-သး-တ-ဖၣ်-န့ၣ်-ဟဲ-လၢ-ယွၤ-ဆံး-အါ-လဲၣ်.&quot;</span><span class="sy0">,</span> insert<span class="br0">&#40;</span>data<span class="sy0">,</span> <span class="st0">&quot;-&quot;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>
&nbsp;
		<span class="kw1">def</span> test_hkree<span class="br0">&#40;</span><span class="kw2">self</span><span class="br0">&#41;</span>:
			data <span class="sy0">=</span> <span class="st0">&quot;ပှၤခရံာ်ဖိအကျဲ&quot;</span>
			<span class="kw2">self</span>.<span class="me1">assertEqual</span><span class="br0">&#40;</span><span class="st0">&quot;ပှၤ-ခရံာ်-ဖိ-အ-ကျဲ&quot;</span><span class="sy0">,</span> insert<span class="br0">&#40;</span>data<span class="sy0">,</span> <span class="st0">&quot;-&quot;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>
&nbsp;
		<span class="kw1">def</span> test_batrur<span class="br0">&#40;</span><span class="kw2">self</span><span class="br0">&#41;</span>:
			data <span class="sy0">=</span> <span class="st0">&quot;လံာ်စံးထီၣ်ပတြၢၤအပူၤ&quot;</span>
			<span class="kw2">self</span>.<span class="me1">assertEqual</span><span class="br0">&#40;</span><span class="st0">&quot;လံာ်-စံး-ထီၣ်-ပတြၢၤ-အ-ပူၤ&quot;</span><span class="sy0">,</span> insert<span class="br0">&#40;</span>data<span class="sy0">,</span> <span class="st0">&quot;-&quot;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>
&nbsp;
		<span class="kw1">def</span> test_parentheses<span class="br0">&#40;</span><span class="kw2">self</span><span class="br0">&#41;</span>:
			data <span class="sy0">=</span> <span class="st0">&quot;တၢ်ကွဲးအသးလၢ(လံာ်စံးထီၣ်ပတြၢၤ)အပူၤ&quot;</span>
			<span class="kw2">self</span>.<span class="me1">assertEqual</span><span class="br0">&#40;</span><span class="st0">&quot;တၢ်-ကွဲး-အ-သး-လၢ-(လံာ်-စံး-ထီၣ်-ပတြၢၤ)-အ-ပူၤ&quot;</span><span class="sy0">,</span> insert<span class="br0">&#40;</span>data<span class="sy0">,</span> <span class="st0">&quot;-&quot;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>
			data <span class="sy0">=</span> <span class="st0">&quot;တၢ်ကွဲးအသးလၢ[လံာ်စံးထီၣ်ပတြၢၤ]အပူၤ&quot;</span>
			<span class="kw2">self</span>.<span class="me1">assertEqual</span><span class="br0">&#40;</span><span class="st0">&quot;တၢ်-ကွဲး-အ-သး-လၢ-[လံာ်-စံး-ထီၣ်-ပတြၢၤ]-အ-ပူၤ&quot;</span><span class="sy0">,</span> insert<span class="br0">&#40;</span>data<span class="sy0">,</span> <span class="st0">&quot;-&quot;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>
			data <span class="sy0">=</span> <span class="st0">&quot;တၢ်ကွဲးအသးလၢ{လံာ်စံးထီၣ်ပတြၢၤ}အပူၤ&quot;</span>
			<span class="kw2">self</span>.<span class="me1">assertEqual</span><span class="br0">&#40;</span><span class="st0">&quot;တၢ်-ကွဲး-အ-သး-လၢ-{လံာ်-စံး-ထီၣ်-ပတြၢၤ}-အ-ပူၤ&quot;</span><span class="sy0">,</span> insert<span class="br0">&#40;</span>data<span class="sy0">,</span> <span class="st0">&quot;-&quot;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>
			data <span class="sy0">=</span> <span class="st0">&quot;တၢ်[]ကွဲး{အ}သးလၢ{လံာ်စံး(ထီၣ်ပတြၢၤ}အပူၤ]&quot;</span>
			<span class="kw2">self</span>.<span class="me1">assertEqual</span><span class="br0">&#40;</span><span class="st0">&quot;တၢ်-[]-ကွဲး-{အ}-သး-လၢ-{လံာ်-စံး-(ထီၣ်-ပတြၢၤ}-အ-ပူၤ]&quot;</span><span class="sy0">,</span> insert<span class="br0">&#40;</span>data<span class="sy0">,</span> <span class="st0">&quot;-&quot;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>
&nbsp;
		<span class="kw1">def</span> test_latin<span class="br0">&#40;</span><span class="kw2">self</span><span class="br0">&#41;</span>:
			data <span class="sy0">=</span> <span class="st0">&quot;တိနီၣ် – လံာ်စီဆှံOld Testemantအပူန့ၣ်လီၤ. လံာ်စီဆှံအသီတအိၣ်ဒံးဘၣ်.&quot;</span>
			<span class="kw2">self</span>.<span class="me1">assertEqual</span><span class="br0">&#40;</span><span class="st0">&quot;တိ-နီၣ် – လံာ်-စီ-ဆှံOld Testemantအ-ပူ-န့ၣ်-လီၤ. လံာ်-စီ-ဆှံ-အ-သီ-တ-အိၣ်-ဒံး-ဘၣ်.&quot;</span><span class="sy0">,</span> insert<span class="br0">&#40;</span>data<span class="sy0">,</span> <span class="st0">&quot;-&quot;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>
			data <span class="sy0">=</span> <span class="st0">&quot;ဖဲကစၢ်ယွၤစံးဝဲတၢ်,ကွဲးအ. သးန့ၣ်မ့ၢ်အစံးဝဲ&quot;</span>
			<span class="kw2">self</span>.<span class="me1">assertEqual</span><span class="br0">&#40;</span><span class="st0">&quot;ဖဲ-က-စၢ်-ယွၤ-စံး-ဝဲ-တၢ်,ကွဲး-အ. သး-န့ၣ်-မ့ၢ်-အ-စံး-ဝဲ&quot;</span><span class="sy0">,</span> insert<span class="br0">&#40;</span>data<span class="sy0">,</span> <span class="st0">&quot;-&quot;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>
&nbsp;
	suite <span class="sy0">=</span> <span class="kw3">unittest</span>.<span class="me1">TestLoader</span><span class="br0">&#40;</span><span class="br0">&#41;</span>.<span class="me1">loadTestsFromTestCase</span><span class="br0">&#40;</span>TestSequenceFunctions<span class="br0">&#41;</span>
	<span class="kw3">unittest</span>.<span class="me1">TextTestRunner</span><span class="br0">&#40;</span>verbosity <span class="sy0">=</span> <span class="nu0">2</span><span class="br0">&#41;</span>.<span class="me1">run</span><span class="br0">&#40;</span>suite<span class="br0">&#41;</span>
&nbsp;
<span class="kw1">if</span> __name__ <span class="sy0">==</span> <span class="st0">&quot;__main__&quot;</span>:
	<span class="kw1">import</span> argparse<span class="sy0">,</span> <span class="kw3">sys</span>
&nbsp;
	<span class="kw3">parser</span> <span class="sy0">=</span> argparse.<span class="me1">ArgumentParser</span><span class="br0">&#40;</span>
	   description <span class="sy0">=</span> <span class="st0">'this program takes a string of text potentially containing Sgaw Karen Unicode and inserts U+200b before each consonant if that consonant is preceded by any character in the Myanmar Unicode block'</span><span class="sy0">,</span>
	   epilog <span class="sy0">=</span> <span class="st0">'this script was written by Ben Sharon'</span><span class="br0">&#41;</span>
	<span class="kw3">parser</span>.<span class="me1">add_argument</span><span class="br0">&#40;</span><span class="st0">'infile'</span><span class="sy0">,</span> nargs<span class="sy0">=</span><span class="st0">'?'</span><span class="sy0">,</span> action <span class="sy0">=</span> <span class="st0">&quot;store&quot;</span><span class="sy0">,</span> default <span class="sy0">=</span> <span class="kw2">None</span><span class="sy0">,</span> <span class="kw2">help</span> <span class="sy0">=</span> <span class="st0">'the input file, default is stdin'</span><span class="br0">&#41;</span>
	<span class="kw3">parser</span>.<span class="me1">add_argument</span><span class="br0">&#40;</span><span class="st0">'outfile'</span><span class="sy0">,</span> nargs<span class="sy0">=</span><span class="st0">'?'</span><span class="sy0">,</span> action <span class="sy0">=</span> <span class="st0">&quot;store&quot;</span><span class="sy0">,</span> default <span class="sy0">=</span> <span class="kw2">None</span><span class="sy0">,</span> <span class="kw2">help</span> <span class="sy0">=</span> <span class="st0">'the output file, default is stdout'</span><span class="br0">&#41;</span>
	<span class="kw3">parser</span>.<span class="me1">add_argument</span><span class="br0">&#40;</span><span class="st0">'-v'</span><span class="sy0">,</span> <span class="st0">'--version'</span><span class="sy0">,</span> action <span class="sy0">=</span> <span class="st0">'version'</span><span class="sy0">,</span> version <span class="sy0">=</span> prog_version<span class="br0">&#41;</span>
	args <span class="sy0">=</span> <span class="kw3">parser</span>.<span class="me1">parse_args</span><span class="br0">&#40;</span><span class="br0">&#41;</span>
&nbsp;
	<span class="kw1">if</span> args.<span class="me1">infile</span>:
		karen_text <span class="sy0">=</span> <span class="kw2">open</span><span class="br0">&#40;</span>args.<span class="me1">infile</span><span class="sy0">,</span> <span class="st0">'r'</span><span class="br0">&#41;</span>.<span class="me1">read</span><span class="br0">&#40;</span><span class="br0">&#41;</span>
&nbsp;
		<span class="kw1">if</span> args.<span class="me1">outfile</span>:
			<span class="kw2">open</span><span class="br0">&#40;</span>args.<span class="me1">outfile</span><span class="sy0">,</span> <span class="st0">'w'</span><span class="br0">&#41;</span>.<span class="me1">write</span><span class="br0">&#40;</span>insert<span class="br0">&#40;</span>karen_text<span class="br0">&#41;</span><span class="br0">&#41;</span>
		<span class="kw1">else</span>:
			<span class="kw2">open</span><span class="br0">&#40;</span>args.<span class="me1">infile</span><span class="sy0">,</span> <span class="st0">'w'</span><span class="br0">&#41;</span>.<span class="me1">write</span><span class="br0">&#40;</span>insert<span class="br0">&#40;</span>karen_text<span class="br0">&#41;</span><span class="br0">&#41;</span>
	<span class="kw1">else</span>:
		test_insert<span class="br0">&#40;</span><span class="br0">&#41;</span></pre>
</dd></dl>
<p>
<strong>Spell Checker</strong>
</p>
<dl class="file">
<dt><a href="/_export/code/development/scripts?codeblock=1" title="Download Snippet" class="mediafile mf_py">kswspellchecker.py</a></dt>
<dd><pre class="code file python"><span class="co1">#!/usr/bin/env/ python3</span>
<span class="co1"># -*- coding: utf-8 -*-</span>
<span class="st0">&quot;&quot;&quot;
~/.scripts/sgkspellcheck.py
&nbsp;
this module has two modes of operation, as a command line utility, and as a python module.
as a commandline utility:
	usage: sgkspellcheck.py [-h] [-v] [infile] [outfile]
&nbsp;
	this script takes an input file, and looks for strings of Myanmar characters
	which do not make a valid Sgaw Karen syllable. if it finds any invalid syllables,
	it will print information about them it to the outfile.
&nbsp;
	positional arguments:
	  infile         the input file, if no file is provided, the script will run
					 tests instead
	  outfile        the output file, default is stdout
&nbsp;
	optional arguments:
	  -h, --help     show this help message and exit
	  -v, --version  show program's version number and exit
&nbsp;
as a python module:
	parse_string_to_phrases(iterable)
	takes a string of text, and returns a list of all runs of Myanmar characters
&nbsp;
	parse_phrase_to_syllables(sgk_phrase)
	takes a string of Myanmar characters, and returns a list of syllables
&nbsp;
	check_syllable_spelling(syllable)
	takes a string containing a syllable, and determines whether it is a valid syllable or not
&nbsp;
&quot;&quot;&quot;</span>
<span class="kw1">import</span> <span class="kw3">unicodedata</span><span class="sy0">,</span> <span class="kw3">binascii</span>
&nbsp;
programVersion <span class="sy0">=</span> <span class="st0">'1.2'</span>
&nbsp;
<span class="kw1">class</span> SyllableChecker:
&nbsp;
	<span class="kw1">def</span> <span class="kw4">__init__</span><span class="br0">&#40;</span><span class="kw2">self</span><span class="br0">&#41;</span>:
&nbsp;
		<span class="kw2">self</span>.<span class="me1">consonants</span> <span class="sy0">=</span> <span class="kw2">set</span><span class="br0">&#40;</span><span class="st0">&quot;ကခဂဃငစဆၡဇညတထဒနပဖဘမယရလဝသဟအဧ&quot;</span><span class="br0">&#41;</span>
		<span class="kw2">self</span>.<span class="me1">medials</span> <span class="sy0">=</span> <span class="kw2">set</span><span class="br0">&#40;</span><span class="st0">&quot;ြျှွၠ&quot;</span><span class="br0">&#41;</span>
		<span class="kw2">self</span>.<span class="me1">vowels</span> <span class="sy0">=</span> <span class="kw2">set</span><span class="br0">&#40;</span><span class="st0">&quot;ါံၢုူ့ဲိီ&quot;</span><span class="br0">&#41;</span>
		<span class="kw2">self</span>.<span class="me1">tones</span> <span class="sy0">=</span> <span class="kw2">set</span><span class="br0">&#40;</span><span class="st0">&quot;ၢၣးာၤ&quot;</span><span class="br0">&#41;</span>
		<span class="kw2">self</span>.<span class="me1">asat</span> <span class="sy0">=</span> <span class="st0">&quot;်&quot;</span>
		<span class="kw2">self</span>.<span class="me1">numerals</span> <span class="sy0">=</span> <span class="kw2">set</span><span class="br0">&#40;</span><span class="st0">&quot;၁၂၃၄၅၆၇၈၉၀&quot;</span><span class="br0">&#41;</span>
		<span class="kw2">self</span>.<span class="me1">myanmarCharacters</span> <span class="sy0">=</span> <span class="br0">&#40;</span><span class="kw2">set</span><span class="br0">&#40;</span><span class="br0">&#123;</span><span class="kw2">chr</span><span class="br0">&#40;</span>x<span class="br0">&#41;</span> <span class="kw1">for</span> x <span class="kw1">in</span> <span class="kw2">range</span><span class="br0">&#40;</span><span class="nu0">4096</span><span class="sy0">,</span> <span class="nu0">4256</span><span class="br0">&#41;</span><span class="br0">&#125;</span><span class="br0">&#41;</span> | <span class="kw2">set</span><span class="br0">&#40;</span><span class="br0">&#123;</span><span class="kw2">chr</span><span class="br0">&#40;</span>x<span class="br0">&#41;</span> <span class="kw1">for</span> x <span class="kw1">in</span> <span class="kw2">range</span><span class="br0">&#40;</span><span class="nu0">43616</span><span class="sy0">,</span> <span class="nu0">43644</span><span class="br0">&#41;</span><span class="br0">&#125;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>
		<span class="kw2">self</span>.<span class="me1">medialCombatibilityMap</span> <span class="sy0">=</span> <span class="br0">&#123;</span>
			<span class="st0">&quot;က&quot;</span>: <span class="kw2">set</span><span class="br0">&#40;</span><span class="st0">&quot;ွြၠျ&quot;</span><span class="br0">&#41;</span><span class="sy0">,</span> <span class="st0">&quot;ခ&quot;</span>: <span class="kw2">set</span><span class="br0">&#40;</span><span class="st0">&quot;ွြၠျ&quot;</span><span class="br0">&#41;</span><span class="sy0">,</span> <span class="st0">&quot;စ&quot;</span>: <span class="kw2">set</span><span class="br0">&#40;</span><span class="st0">&quot;ွြှ&quot;</span><span class="br0">&#41;</span><span class="sy0">,</span> <span class="st0">&quot;ဆ&quot;</span>: <span class="kw2">set</span><span class="br0">&#40;</span><span class="st0">&quot;ွြှ&quot;</span><span class="br0">&#41;</span><span class="sy0">,</span> <span class="st0">&quot;ည&quot;</span>: <span class="kw2">set</span><span class="br0">&#40;</span><span class="st0">&quot;ွ&quot;</span><span class="br0">&#41;</span><span class="sy0">,</span> <span class="st0">&quot;တ&quot;</span>: <span class="kw2">set</span><span class="br0">&#40;</span><span class="st0">&quot;ွြ&quot;</span><span class="br0">&#41;</span><span class="sy0">,</span>
			<span class="st0">&quot;ထ&quot;</span>: <span class="kw2">set</span><span class="br0">&#40;</span><span class="st0">&quot;ွြ&quot;</span><span class="br0">&#41;</span><span class="sy0">,</span> <span class="st0">&quot;ဒ&quot;</span>: <span class="kw2">set</span><span class="br0">&#40;</span><span class="st0">&quot;ွ&quot;</span><span class="br0">&#41;</span><span class="sy0">,</span> <span class="st0">&quot;န&quot;</span>: <span class="kw2">set</span><span class="br0">&#40;</span><span class="st0">&quot;ွ&quot;</span><span class="br0">&#41;</span><span class="sy0">,</span> <span class="st0">&quot;ပ&quot;</span>: <span class="kw2">set</span><span class="br0">&#40;</span><span class="st0">&quot;ွြှၠျ&quot;</span><span class="br0">&#41;</span><span class="sy0">,</span> <span class="st0">&quot;ဖ&quot;</span>: <span class="kw2">set</span><span class="br0">&#40;</span><span class="st0">&quot;ွြှၠျ&quot;</span><span class="br0">&#41;</span><span class="sy0">,</span> <span class="st0">&quot;ဘ&quot;</span>: <span class="kw2">set</span><span class="br0">&#40;</span><span class="st0">&quot;ှၠျ&quot;</span><span class="br0">&#41;</span><span class="sy0">,</span>
			<span class="st0">&quot;မ&quot;</span>: <span class="kw2">set</span><span class="br0">&#40;</span><span class="st0">&quot;ွှၠျ&quot;</span><span class="br0">&#41;</span><span class="sy0">,</span> <span class="st0">&quot;ယ&quot;</span>: <span class="kw2">set</span><span class="br0">&#40;</span><span class="st0">&quot;ွ&quot;</span><span class="br0">&#41;</span><span class="sy0">,</span> <span class="st0">&quot;ရ&quot;</span>: <span class="kw2">set</span><span class="br0">&#40;</span><span class="st0">&quot;ွ&quot;</span><span class="br0">&#41;</span><span class="sy0">,</span> <span class="st0">&quot;လ&quot;</span>: <span class="kw2">set</span><span class="br0">&#40;</span><span class="st0">&quot;ွ&quot;</span><span class="br0">&#41;</span><span class="sy0">,</span> <span class="st0">&quot;သ&quot;</span>: <span class="kw2">set</span><span class="br0">&#40;</span><span class="st0">&quot;ွြ&quot;</span><span class="br0">&#41;</span><span class="sy0">,</span>
		<span class="br0">&#125;</span>
		<span class="kw2">self</span>.<span class="me1">lastSyllable</span><span class="sy0">,</span> <span class="kw2">self</span>.<span class="me1">errorLog</span> <span class="sy0">=</span> <span class="st0">&quot;&quot;</span><span class="sy0">,</span> <span class="br0">&#91;</span><span class="br0">&#93;</span>
&nbsp;
	<span class="kw1">def</span> parseSyllables<span class="br0">&#40;</span><span class="kw2">self</span><span class="sy0">,</span> <span class="kw3">string</span><span class="br0">&#41;</span>:
		syllable<span class="sy0">,</span> inSyllable<span class="sy0">,</span> lastCharacter <span class="sy0">=</span> <span class="st0">''</span><span class="sy0">,</span> <span class="kw2">False</span><span class="sy0">,</span> <span class="st0">''</span>
		<span class="kw1">for</span> currentCharacter <span class="kw1">in</span> <span class="kw3">string</span>:
			<span class="kw1">if</span> <span class="kw1">not</span> inSyllable <span class="kw1">and</span> currentCharacter <span class="kw1">in</span> <span class="kw2">self</span>.<span class="me1">myanmarCharacters</span>:
				inSyllable <span class="sy0">=</span> <span class="kw2">True</span><span class="sy0">;</span> syllable +<span class="sy0">=</span> currentCharacter
			<span class="kw1">elif</span> inSyllable <span class="kw1">and</span> <span class="br0">&#40;</span>
					currentCharacter <span class="kw1">in</span> <span class="kw2">self</span>.<span class="me1">consonants</span> <span class="kw1">or</span>
						<span class="br0">&#40;</span>lastCharacter <span class="kw1">not</span> <span class="kw1">in</span> <span class="kw2">self</span>.<span class="me1">numerals</span> <span class="kw1">and</span> currentCharacter <span class="kw1">in</span> <span class="kw2">self</span>.<span class="me1">numerals</span><span class="br0">&#41;</span> <span class="kw1">or</span>
						<span class="br0">&#40;</span>lastCharacter <span class="kw1">in</span> <span class="kw2">self</span>.<span class="me1">numerals</span> <span class="kw1">and</span> currentCharacter <span class="kw1">not</span> <span class="kw1">in</span> <span class="kw2">self</span>.<span class="me1">numerals</span> <span class="kw1">and</span> currentCharacter <span class="kw1">in</span> <span class="kw2">self</span>.<span class="me1">myanmarCharacters</span><span class="br0">&#41;</span>
					<span class="br0">&#41;</span>:
				<span class="kw1">if</span> syllable: <span class="kw1">yield</span> syllable<span class="sy0">;</span> syllable <span class="sy0">=</span> currentCharacter
			<span class="kw1">elif</span> inSyllable <span class="kw1">and</span> currentCharacter <span class="kw1">in</span> <span class="kw2">self</span>.<span class="me1">myanmarCharacters</span>:
				syllable +<span class="sy0">=</span> currentCharacter
			<span class="kw1">else</span>:
				inSyllable <span class="sy0">=</span> <span class="kw2">False</span>
				<span class="kw1">if</span> syllable:
					<span class="kw1">yield</span> syllable
					syllable <span class="sy0">=</span> <span class="st0">''</span>
			lastCharacter <span class="sy0">=</span> currentCharacter
		<span class="kw1">if</span> syllable: <span class="kw1">yield</span> syllable
&nbsp;
	<span class="kw1">def</span> __charSetNumberAssignment<span class="br0">&#40;</span><span class="kw2">self</span><span class="sy0">,</span> char<span class="br0">&#41;</span>:
		<span class="kw1">if</span> char <span class="kw1">in</span> <span class="kw2">self</span>.<span class="me1">consonants</span>:
			<span class="kw1">return</span> <span class="nu0">1</span>
		<span class="kw1">elif</span> char <span class="kw1">in</span> <span class="kw2">self</span>.<span class="me1">medials</span>:
			<span class="kw1">return</span> <span class="nu0">2</span>
		<span class="kw1">elif</span> char <span class="kw1">in</span> <span class="kw2">self</span>.<span class="me1">vowels</span>:
			<span class="kw1">return</span> <span class="nu0">3</span>
		<span class="kw1">elif</span> char <span class="kw1">in</span> <span class="kw2">self</span>.<span class="me1">tones</span>:
			<span class="kw1">return</span> <span class="nu0">4</span>
		<span class="kw1">elif</span> char <span class="kw1">in</span> <span class="kw2">self</span>.<span class="me1">asat</span>:
			<span class="kw1">return</span> <span class="nu0">5</span>
		<span class="kw1">return</span> <span class="nu0">0</span>
&nbsp;
	<span class="kw1">def</span> isValidSyllable<span class="br0">&#40;</span><span class="kw2">self</span><span class="sy0">,</span> syllable<span class="br0">&#41;</span>:
		isCorrect<span class="sy0">,</span> <span class="kw2">self</span>.<span class="me1">lastSyllable</span><span class="sy0">,</span> <span class="kw2">self</span>.<span class="me1">errorLog</span> <span class="sy0">=</span> <span class="kw2">True</span><span class="sy0">,</span> syllable<span class="sy0">,</span> <span class="br0">&#91;</span><span class="br0">&#93;</span>
&nbsp;
		<span class="kw1">if</span> <span class="kw1">not</span> syllable:
			<span class="kw2">self</span>.<span class="me1">errorLog</span>.<span class="me1">append</span><span class="br0">&#40;</span><span class="st0">&quot;oops, there's nothing here&quot;</span><span class="br0">&#41;</span>
			<span class="kw1">return</span> <span class="kw2">False</span>
&nbsp;
		<span class="kw1">if</span> <span class="kw2">all</span><span class="br0">&#40;</span>c <span class="kw1">in</span> <span class="kw2">self</span>.<span class="me1">numerals</span> <span class="kw1">for</span> c <span class="kw1">in</span> syllable<span class="br0">&#41;</span>:
			<span class="kw1">return</span> isCorrect
&nbsp;
		<span class="kw1">if</span> syllable<span class="br0">&#91;</span><span class="nu0">0</span><span class="br0">&#93;</span> <span class="kw1">not</span> <span class="kw1">in</span> <span class="kw2">self</span>.<span class="me1">consonants</span>:
			<span class="kw2">self</span>.<span class="me1">errorLog</span>.<span class="me1">append</span><span class="br0">&#40;</span><span class="st0">&quot;this syllable does not begin with a consonant&quot;</span><span class="br0">&#41;</span>
			isCorrect <span class="sy0">=</span> <span class="kw2">False</span>
&nbsp;
		<span class="kw1">if</span> syllable<span class="br0">&#91;</span>-<span class="nu0">1</span><span class="br0">&#93;</span> <span class="kw1">in</span> <span class="kw2">self</span>.<span class="me1">medials</span>:
			<span class="kw2">self</span>.<span class="me1">errorLog</span>.<span class="me1">append</span><span class="br0">&#40;</span><span class="st0">&quot;ends with a medial&quot;</span><span class="br0">&#41;</span>
			isCorrect <span class="sy0">=</span> <span class="kw2">False</span>
&nbsp;
		<span class="kw1">try</span>:
			<span class="kw1">if</span> syllable<span class="br0">&#91;</span><span class="nu0">1</span><span class="br0">&#93;</span> <span class="kw1">in</span> <span class="kw2">self</span>.<span class="me1">medials</span> <span class="kw1">and</span> syllable<span class="br0">&#91;</span><span class="nu0">1</span><span class="br0">&#93;</span> <span class="kw1">not</span> <span class="kw1">in</span> <span class="kw2">self</span>.<span class="me1">medialCombatibilityMap</span><span class="br0">&#91;</span>syllable<span class="br0">&#91;</span><span class="nu0">0</span><span class="br0">&#93;</span><span class="br0">&#93;</span>:
				isCorrect <span class="sy0">=</span> <span class="kw2">False</span>
		<span class="kw1">except</span> <span class="kw2">KeyError</span>:
			<span class="kw2">self</span>.<span class="me1">errorLog</span>.<span class="me1">append</span><span class="br0">&#40;</span><span class="st0">&quot;illegal combination of consonant and medial&quot;</span><span class="br0">&#41;</span>
			isCorrect <span class="sy0">=</span> <span class="kw2">False</span>
		<span class="kw1">except</span> <span class="kw2">IndexError</span>: <span class="co1"># A single character syllable, can't address the second character.</span>
			<span class="kw1">pass</span>
&nbsp;
		<span class="kw1">if</span> <span class="kw2">len</span><span class="br0">&#40;</span>syllable<span class="br0">&#41;</span> <span class="sy0">&gt;</span> <span class="nu0">2</span> <span class="kw1">and</span> syllable<span class="br0">&#91;</span>-<span class="nu0">1</span><span class="br0">&#93;</span> <span class="sy0">==</span> <span class="kw2">self</span>.<span class="me1">asat</span> <span class="kw1">and</span> syllable<span class="br0">&#91;</span>-<span class="nu0">2</span><span class="br0">&#93;</span> <span class="kw1">not</span> <span class="kw1">in</span> <span class="st0">'ၣာၢ'</span>:
			<span class="kw2">self</span>.<span class="me1">errorLog</span>.<span class="me1">append</span><span class="br0">&#40;</span><span class="st0">&quot;ahthee or hathee without asat&quot;</span><span class="br0">&#41;</span>
			isCorrect <span class="sy0">=</span> <span class="kw2">False</span>
&nbsp;
		s<span class="sy0">,</span> c <span class="sy0">=</span> syllable.<span class="me1">replace</span><span class="br0">&#40;</span><span class="st0">&quot;ၢ်&quot;</span><span class="sy0">,</span> <span class="st0">&quot;်&quot;</span><span class="br0">&#41;</span><span class="sy0">,</span> <span class="kw2">self</span>.__charSetNumberAssignment
		<span class="kw1">if</span> <span class="kw1">not</span> <span class="kw2">all</span><span class="br0">&#40;</span>c<span class="br0">&#40;</span>s<span class="br0">&#91;</span>i<span class="br0">&#93;</span><span class="br0">&#41;</span> <span class="sy0">&lt;</span> c<span class="br0">&#40;</span>s<span class="br0">&#91;</span>i+<span class="nu0">1</span><span class="br0">&#93;</span><span class="br0">&#41;</span> <span class="kw1">for</span> i <span class="kw1">in</span> <span class="kw2">range</span><span class="br0">&#40;</span><span class="kw2">len</span><span class="br0">&#40;</span>s<span class="br0">&#41;</span>-<span class="nu0">1</span><span class="br0">&#41;</span><span class="br0">&#41;</span>:
			<span class="kw2">self</span>.<span class="me1">errorLog</span>.<span class="me1">append</span><span class="br0">&#40;</span><span class="st0">&quot;does not follow the basic structure of a syllable&quot;</span><span class="br0">&#41;</span>
			isCorrect <span class="sy0">=</span> <span class="kw2">False</span>
&nbsp;
		<span class="kw1">return</span> isCorrect
&nbsp;
	<span class="kw1">def</span> stringContainsOnlyValidKarenSyllables<span class="br0">&#40;</span><span class="kw2">self</span><span class="sy0">,</span> <span class="kw3">string</span><span class="br0">&#41;</span>:
		<span class="kw1">for</span> syllable <span class="kw1">in</span> <span class="kw2">self</span>.<span class="me1">parseSyllables</span><span class="br0">&#40;</span><span class="kw3">string</span><span class="br0">&#41;</span>:
			<span class="kw1">if</span> <span class="kw1">not</span> <span class="kw2">self</span>.<span class="me1">isValidSyllable</span><span class="br0">&#40;</span>syllable<span class="br0">&#41;</span>:
				<span class="kw1">return</span> <span class="kw2">False</span>
		<span class="kw1">return</span> <span class="kw2">True</span>
&nbsp;
	<span class="kw1">def</span> getLastSyllableReport<span class="br0">&#40;</span><span class="kw2">self</span><span class="sy0">,</span> verbosity <span class="sy0">=</span> <span class="nu0">3</span><span class="br0">&#41;</span>:
		reportMessage <span class="sy0">=</span> <span class="st0">'Syllable Report<span class="es0">\n</span>'</span>
		<span class="kw1">if</span> verbosity <span class="sy0">==</span> <span class="nu0">1</span>:
			reportMessage +<span class="sy0">=</span> <span class="st0">'  Text: {}, Errors: {}'</span>.<span class="me1">format</span><span class="br0">&#40;</span><span class="kw2">self</span>.<span class="me1">lastSyllable</span><span class="sy0">,</span> <span class="kw2">len</span><span class="br0">&#40;</span><span class="kw2">self</span>.<span class="me1">errorLog</span><span class="br0">&#41;</span><span class="br0">&#41;</span>
		<span class="kw1">elif</span> verbosity <span class="sy0">&gt;</span> <span class="nu0">1</span>:
			reportMessage +<span class="sy0">=</span> <span class="st0">'  Text: {}<span class="es0">\n</span>'</span>.<span class="me1">format</span><span class="br0">&#40;</span><span class="kw2">self</span>.<span class="me1">lastSyllable</span><span class="br0">&#41;</span>
			<span class="kw1">if</span> <span class="kw2">self</span>.<span class="me1">errorLog</span>:
				reportMessage +<span class="sy0">=</span> <span class="st0">'  Error Messages:<span class="es0">\n</span>'</span>
				<span class="kw1">for</span> errorMessage <span class="kw1">in</span> <span class="kw2">self</span>.<span class="me1">errorLog</span>:
					reportMessage +<span class="sy0">=</span> <span class="st0">'    {}<span class="es0">\n</span>'</span>.<span class="me1">format</span><span class="br0">&#40;</span>errorMessage<span class="br0">&#41;</span>
		<span class="kw1">if</span> verbosity <span class="sy0">&gt;</span> <span class="nu0">2</span>:
			reportMessage +<span class="sy0">=</span> <span class="st0">&quot;  Unicode Data (in syllable order):<span class="es0">\n</span>&quot;</span>
			<span class="kw1">for</span> char <span class="kw1">in</span> <span class="kw2">self</span>.<span class="me1">lastSyllable</span>:
				reportMessage +<span class="sy0">=</span> <span class="st0">'    U+{}: {}<span class="es0">\n</span>'</span>.<span class="me1">format</span><span class="br0">&#40;</span><span class="kw2">str</span><span class="br0">&#40;</span><span class="kw2">hex</span><span class="br0">&#40;</span><span class="kw2">ord</span><span class="br0">&#40;</span>char<span class="br0">&#41;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>.<span class="me1">replace</span><span class="br0">&#40;</span><span class="st0">'0x'</span><span class="sy0">,</span> <span class="st0">''</span><span class="sy0">,</span> <span class="nu0">1</span><span class="br0">&#41;</span>.<span class="me1">upper</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">,</span> <span class="kw3">unicodedata</span>.<span class="me1">name</span><span class="br0">&#40;</span>char<span class="sy0">,</span> <span class="st0">'&lt;undefined&gt;'</span><span class="br0">&#41;</span><span class="br0">&#41;</span>
		<span class="kw1">return</span> reportMessage
<span class="co1"># End SyllableChecker class</span>
&nbsp;
<span class="co1">###################################################################################</span>
<span class="co1"># Test Code</span>
<span class="co1">###################################################################################</span>
&nbsp;
<span class="kw1">def</span> <span class="kw3">test</span><span class="br0">&#40;</span><span class="br0">&#41;</span>:
	<span class="kw1">import</span> <span class="kw3">unittest</span><span class="sy0">,</span> <span class="kw3">random</span>
	<span class="kw1">class</span> TestSequenceFunctions<span class="br0">&#40;</span><span class="kw3">unittest</span>.<span class="me1">TestCase</span><span class="br0">&#41;</span>:
&nbsp;
		<span class="kw1">def</span> setUp<span class="br0">&#40;</span><span class="kw2">self</span><span class="br0">&#41;</span>:
			<span class="kw2">self</span>.<span class="me1">checker</span> <span class="sy0">=</span> SyllableChecker<span class="br0">&#40;</span><span class="br0">&#41;</span>
&nbsp;
		<span class="kw1">def</span> test_validSyllable<span class="br0">&#40;</span><span class="kw2">self</span><span class="br0">&#41;</span>:
			testSyllables <span class="sy0">=</span> <span class="br0">&#40;</span><span class="st0">&quot;တၢ်&quot;</span><span class="sy0">,</span><span class="br0">&#41;</span>
<span class="co1">#					&quot;ဒီး&quot;, &quot;ယွၤ&quot;, &quot;ဟဲ&quot;, &quot;လီၤ&quot;, &quot;လၢ&quot;, &quot;တၢ်&quot;, &quot;အၢၣ်&quot;, &quot;အ&quot;, &quot;ပူၤ&quot;, &quot;ဆၢ&quot;, &quot;ထၢၣ်&quot;,</span>
<span class="co1">#					&quot;အီၤ&quot;, &quot;ဖဲ&quot;, &quot;န့ၣ်&quot;, &quot;ကိး&quot;, &quot;ထီၣ်&quot;, &quot;အ&quot;, &quot;မံၤ&quot;, &quot;လဲၤ&quot;, &quot;မဲာ်&quot;, &quot;ညါ&quot;, &quot;က&quot;,</span>
<span class="co1">#					&quot;စၢ်&quot;, &quot;သး&quot;, &quot;အိၣ်&quot;, &quot;တၢ်&quot;, &quot;ညီၤ&quot;, &quot;ကီ&quot;, &quot;ဘျုး&quot;, &quot;ဖှိၣ်&quot;, &quot;မ့ၢ်&quot;, &quot;တီ&quot;, &quot;အိၣ်&quot;,</span>
<span class="co1">#					&quot;ဝဲ&quot;, &quot;အါ&quot;, &quot;မး&quot;, &quot;ဟံး&quot;, &quot;ဃာ်&quot;, &quot;ဘျုး&quot;, &quot;ပှၤ&quot;, &quot;ထိ&quot;, &quot;ဂီၢ်&quot;, &quot;ပျၢ်&quot;,</span>
<span class="co1">#					&quot;အၢ&quot;, &quot;သီ&quot;, &quot;သ&quot;, &quot;ရူး&quot;, &quot;မၣ်&quot;, &quot;ဒဲး&quot;, &quot;ဖိ&quot;, &quot;အ&quot;, &quot;ကျဲ&quot;, &quot;ပှၤ&quot;, &quot;ခ&quot;, &quot;ရံာ်&quot;,</span>
<span class="co1">#			)</span>
			<span class="kw1">for</span> syllable <span class="kw1">in</span> testSyllables:
				<span class="kw2">self</span>.<span class="me1">assertTrue</span><span class="br0">&#40;</span><span class="kw2">self</span>.<span class="me1">checker</span>.<span class="me1">isValidSyllable</span><span class="br0">&#40;</span>syllable<span class="br0">&#41;</span><span class="br0">&#41;</span>
&nbsp;
		<span class="kw1">def</span> test_nonConsonantStart<span class="br0">&#40;</span><span class="kw2">self</span><span class="br0">&#41;</span>:
			testSyllables <span class="sy0">=</span> <span class="br0">&#40;</span>
					<span class="st0">&quot;ၤ&quot;</span><span class="sy0">,</span> <span class="st0">&quot;ၢ်&quot;</span><span class="sy0">,</span> <span class="st0">&quot;ံ&quot;</span><span class="sy0">,</span> <span class="st0">&quot;ံဖံံ&quot;</span><span class="sy0">,</span> <span class="st0">&quot;့တီ့&quot;</span><span class="sy0">,</span> <span class="st0">&quot;ျကြျံၤ&quot;</span><span class="sy0">,</span> <span class="st0">&quot;ျဒီိး&quot;</span><span class="sy0">,</span> <span class="st0">&quot;ိကၤး&quot;</span><span class="sy0">,</span> <span class="st0">&quot;ဲကျ&quot;</span><span class="sy0">,</span>
			<span class="br0">&#41;</span>
			<span class="kw1">for</span> syllable <span class="kw1">in</span> testSyllables:
				<span class="kw2">self</span>.<span class="me1">assertFalse</span><span class="br0">&#40;</span><span class="kw2">self</span>.<span class="me1">checker</span>.<span class="me1">isValidSyllable</span><span class="br0">&#40;</span>syllable<span class="br0">&#41;</span><span class="br0">&#41;</span>
&nbsp;
		<span class="kw1">def</span> test_medialEnd<span class="br0">&#40;</span><span class="kw2">self</span><span class="br0">&#41;</span>:
			testSyllables <span class="sy0">=</span> <span class="br0">&#40;</span><span class="st0">&quot;ကြ&quot;</span><span class="sy0">,</span> <span class="st0">&quot;ကျ&quot;</span><span class="sy0">,</span> <span class="st0">&quot;ကၠ&quot;</span><span class="sy0">,</span> <span class="st0">&quot;ညြ&quot;</span><span class="sy0">,</span> <span class="st0">&quot;တွ&quot;</span><span class="sy0">,</span> <span class="st0">&quot;ဝှ&quot;</span><span class="sy0">,</span><span class="br0">&#41;</span>
			<span class="kw1">for</span> syllable <span class="kw1">in</span> testSyllables:
				<span class="kw2">self</span>.<span class="me1">assertFalse</span><span class="br0">&#40;</span><span class="kw2">self</span>.<span class="me1">checker</span>.<span class="me1">isValidSyllable</span><span class="br0">&#40;</span>syllable<span class="br0">&#41;</span><span class="br0">&#41;</span>
&nbsp;
		<span class="kw1">def</span> test_randomMyanmarSyllables<span class="br0">&#40;</span><span class="kw2">self</span><span class="br0">&#41;</span>:
			myanmarChars <span class="sy0">=</span> <span class="st0">''</span>.<span class="me1">join</span><span class="br0">&#40;</span><span class="br0">&#40;</span><span class="kw2">chr</span><span class="br0">&#40;</span>x<span class="br0">&#41;</span> <span class="kw1">for</span> x <span class="kw1">in</span> <span class="kw2">range</span><span class="br0">&#40;</span><span class="nu0">4096</span><span class="sy0">,</span> <span class="nu0">4256</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="br0">&#41;</span> + <span class="st0">''</span>.<span class="me1">join</span><span class="br0">&#40;</span><span class="br0">&#40;</span><span class="kw2">chr</span><span class="br0">&#40;</span>x<span class="br0">&#41;</span> <span class="kw1">for</span> x <span class="kw1">in</span> <span class="kw2">range</span><span class="br0">&#40;</span><span class="nu0">43616</span><span class="sy0">,</span> <span class="nu0">43644</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>
&nbsp;
			<span class="kw1">for</span> i <span class="kw1">in</span> <span class="kw2">range</span><span class="br0">&#40;</span><span class="nu0">30</span><span class="br0">&#41;</span>:
				<span class="kw1">for</span> j <span class="kw1">in</span> <span class="kw2">range</span><span class="br0">&#40;</span><span class="nu0">5</span><span class="br0">&#41;</span>:
					testStr <span class="sy0">=</span> <span class="st0">''</span>.<span class="me1">join</span><span class="br0">&#40;</span><span class="br0">&#40;</span><span class="kw3">random</span>.<span class="me1">choice</span><span class="br0">&#40;</span>myanmarChars<span class="br0">&#41;</span> <span class="kw1">for</span> n <span class="kw1">in</span> <span class="kw2">range</span><span class="br0">&#40;</span>i<span class="br0">&#41;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>
					<span class="kw1">try</span>:
						<span class="kw2">self</span>.<span class="me1">checker</span>.<span class="me1">isValidSyllable</span><span class="br0">&#40;</span>testStr<span class="br0">&#41;</span>
					<span class="kw1">except</span> <span class="kw2">Exception</span> <span class="kw1">as</span> e:
						<span class="kw2">self</span>.<span class="me1">fail</span><span class="br0">&#40;</span><span class="st0">&quot;isValidSyllable('{}') unexpectedly raised an exception: ({})&quot;</span>.<span class="me1">format</span><span class="br0">&#40;</span>testStr<span class="sy0">,</span> e<span class="br0">&#41;</span><span class="br0">&#41;</span>
&nbsp;
		<span class="kw1">def</span> test_randomUnicodeSyllables<span class="br0">&#40;</span><span class="kw2">self</span><span class="br0">&#41;</span>:
			chars <span class="sy0">=</span> <span class="st0">''</span>.<span class="me1">join</span><span class="br0">&#40;</span><span class="br0">&#40;</span><span class="kw2">chr</span><span class="br0">&#40;</span>x<span class="br0">&#41;</span> <span class="kw1">for</span> x <span class="kw1">in</span> <span class="kw2">range</span><span class="br0">&#40;</span><span class="nu0">0</span><span class="sy0">,</span> <span class="nu0">65536</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>
&nbsp;
			<span class="kw1">for</span> i <span class="kw1">in</span> <span class="kw2">range</span><span class="br0">&#40;</span><span class="nu0">30</span><span class="br0">&#41;</span>:
				<span class="kw1">for</span> j <span class="kw1">in</span> <span class="kw2">range</span><span class="br0">&#40;</span><span class="nu0">5</span><span class="br0">&#41;</span>:
					testStr <span class="sy0">=</span> <span class="st0">''</span>.<span class="me1">join</span><span class="br0">&#40;</span><span class="br0">&#40;</span><span class="kw3">random</span>.<span class="me1">choice</span><span class="br0">&#40;</span>chars<span class="br0">&#41;</span> <span class="kw1">for</span> n <span class="kw1">in</span> <span class="kw2">range</span><span class="br0">&#40;</span>i<span class="br0">&#41;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>
					<span class="kw1">try</span>:
						<span class="kw2">self</span>.<span class="me1">checker</span>.<span class="me1">isValidSyllable</span><span class="br0">&#40;</span>testStr<span class="br0">&#41;</span>
					<span class="kw1">except</span> <span class="kw2">Exception</span> <span class="kw1">as</span> e:
						<span class="kw2">self</span>.<span class="me1">fail</span><span class="br0">&#40;</span><span class="st0">&quot;isValidSyllable('{}') unexpectedly raised an exception: ({})&quot;</span>.<span class="me1">format</span><span class="br0">&#40;</span>testStr<span class="sy0">,</span> e<span class="br0">&#41;</span><span class="br0">&#41;</span>
&nbsp;
		<span class="kw1">def</span> test_parseSyllables<span class="br0">&#40;</span><span class="kw2">self</span><span class="br0">&#41;</span>:
			<span class="kw2">self</span>.<span class="me1">assertEqual</span><span class="br0">&#40;</span><span class="st0">&quot;ဒီး-စီၤ-ဖံ-လံ-ပူး-စံး-ဘၣ်-အီၤ&quot;</span><span class="sy0">,</span> <span class="st0">'-'</span>.<span class="me1">join</span><span class="br0">&#40;</span><span class="kw2">self</span>.<span class="me1">checker</span>.<span class="me1">parseSyllables</span><span class="br0">&#40;</span><span class="st0">&quot;ဒီးစီၤဖံလံပူးစံးဘၣ်အီၤ&quot;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>
			<span class="kw2">self</span>.<span class="me1">assertEqual</span><span class="br0">&#40;</span><span class="st0">&quot;ဒီး-စီၤ-ဖံ-လံ-ပူး-စံး-ဘၣ်-အီၤ&quot;</span><span class="sy0">,</span> <span class="st0">'-'</span>.<span class="me1">join</span><span class="br0">&#40;</span><span class="kw2">self</span>.<span class="me1">checker</span>.<span class="me1">parseSyllables</span><span class="br0">&#40;</span><span class="st0">&quot;somethingဒီးစီၤဖံလံပူးစံးဘၣ်အီၤ&quot;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>
			<span class="kw2">self</span>.<span class="me1">assertEqual</span><span class="br0">&#40;</span><span class="st0">&quot;ဒီး-စီၤ-ဖံ-လံ-ပူး-စံး-ဘၣ်-အီၤ&quot;</span><span class="sy0">,</span> <span class="st0">'-'</span>.<span class="me1">join</span><span class="br0">&#40;</span><span class="kw2">self</span>.<span class="me1">checker</span>.<span class="me1">parseSyllables</span><span class="br0">&#40;</span><span class="st0">&quot;ဒီးစီၤဖံလံပူးစံးဘၣ်အီၤsomething&quot;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>
			<span class="kw2">self</span>.<span class="me1">assertEqual</span><span class="br0">&#40;</span><span class="st0">&quot;ဒီး-စီၤ-ဖံ-လံ-ပူး-စံး-ဘၣ်-အီၤ&quot;</span><span class="sy0">,</span> <span class="st0">'-'</span>.<span class="me1">join</span><span class="br0">&#40;</span><span class="kw2">self</span>.<span class="me1">checker</span>.<span class="me1">parseSyllables</span><span class="br0">&#40;</span><span class="st0">&quot;ဒီးစီၤ ဖံလံပူးစံး ဘၣ်အီၤ&quot;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>
&nbsp;
		<span class="kw1">def</span> test_stringContainsOnlyValidKarenSyllables<span class="br0">&#40;</span><span class="kw2">self</span><span class="br0">&#41;</span>:
			<span class="kw2">self</span>.<span class="me1">assertTrue</span><span class="br0">&#40;</span><span class="kw2">self</span>.<span class="me1">checker</span>.<span class="me1">stringContainsOnlyValidKarenSyllables</span><span class="br0">&#40;</span><span class="st0">&quot;ဒီးစီၤဖံလံပူးစံးဘၣ်အီၤ&quot;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>
			<span class="kw2">self</span>.<span class="me1">assertTrue</span><span class="br0">&#40;</span><span class="kw2">self</span>.<span class="me1">checker</span>.<span class="me1">stringContainsOnlyValidKarenSyllables</span><span class="br0">&#40;</span><span class="st0">&quot;somethingဒီးစီၤဖံလံပူးစံးဘၣ်အီၤ&quot;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>
			<span class="kw2">self</span>.<span class="me1">assertTrue</span><span class="br0">&#40;</span><span class="kw2">self</span>.<span class="me1">checker</span>.<span class="me1">stringContainsOnlyValidKarenSyllables</span><span class="br0">&#40;</span><span class="st0">&quot;ဒီးစီၤဖံလံပူးစံးဘၣ်အီၤsomething&quot;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>
			<span class="kw2">self</span>.<span class="me1">assertTrue</span><span class="br0">&#40;</span><span class="kw2">self</span>.<span class="me1">checker</span>.<span class="me1">stringContainsOnlyValidKarenSyllables</span><span class="br0">&#40;</span><span class="st0">&quot;ဒီးစီၤ ဖံလံပူးစံး ဘၣ်အီၤ&quot;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>
&nbsp;
			<span class="kw2">self</span>.<span class="me1">assertFalse</span><span class="br0">&#40;</span><span class="kw2">self</span>.<span class="me1">checker</span>.<span class="me1">stringContainsOnlyValidKarenSyllables</span><span class="br0">&#40;</span><span class="st0">&quot;ဒီးစီၤဖံလံပူးးစံးဘၣ်အီၤ&quot;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>
			<span class="kw2">self</span>.<span class="me1">assertFalse</span><span class="br0">&#40;</span><span class="kw2">self</span>.<span class="me1">checker</span>.<span class="me1">stringContainsOnlyValidKarenSyllables</span><span class="br0">&#40;</span><span class="st0">&quot;somethingံဒီးစီၤဖံလံပူးစံးဘၣ်အီၤ&quot;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>
			<span class="kw2">self</span>.<span class="me1">assertFalse</span><span class="br0">&#40;</span><span class="kw2">self</span>.<span class="me1">checker</span>.<span class="me1">stringContainsOnlyValidKarenSyllables</span><span class="br0">&#40;</span><span class="st0">&quot;ဒီးစီၤဖံလံပူးစံးဘၣ်ကြအီၤsomething&quot;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>
			<span class="kw2">self</span>.<span class="me1">assertFalse</span><span class="br0">&#40;</span><span class="kw2">self</span>.<span class="me1">checker</span>.<span class="me1">stringContainsOnlyValidKarenSyllables</span><span class="br0">&#40;</span><span class="st0">&quot;ဒီးစီၤ ဖံလံပူးစံး ဘၣ်အီၤ့&quot;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>
&nbsp;
	suite <span class="sy0">=</span> <span class="kw3">unittest</span>.<span class="me1">TestLoader</span><span class="br0">&#40;</span><span class="br0">&#41;</span>.<span class="me1">loadTestsFromTestCase</span><span class="br0">&#40;</span>TestSequenceFunctions<span class="br0">&#41;</span>
	<span class="kw3">unittest</span>.<span class="me1">TextTestRunner</span><span class="br0">&#40;</span>verbosity <span class="sy0">=</span> <span class="nu0">2</span><span class="br0">&#41;</span>.<span class="me1">run</span><span class="br0">&#40;</span>suite<span class="br0">&#41;</span>
&nbsp;
<span class="co1">###################################################################################</span>
<span class="co1"># Application Code</span>
<span class="co1">###################################################################################</span>
&nbsp;
<span class="kw1">if</span> __name__ <span class="sy0">==</span> <span class="st0">&quot;__main__&quot;</span>:
	<span class="kw1">import</span> argparse<span class="sy0">,</span> <span class="kw3">sys</span>
&nbsp;
	<span class="kw3">parser</span> <span class="sy0">=</span> argparse.<span class="me1">ArgumentParser</span><span class="br0">&#40;</span>
	   description <span class="sy0">=</span> <span class="st0">'this script takes an input file, and looks for strings of Myanmar characters which do not make a valid Sgaw Karen syllable'</span><span class="sy0">,</span>
	   epilog <span class="sy0">=</span> <span class="st0">'this script was written by Ben Sharon'</span><span class="br0">&#41;</span>
	<span class="kw3">parser</span>.<span class="me1">add_argument</span><span class="br0">&#40;</span><span class="st0">'infile'</span><span class="sy0">,</span> nargs<span class="sy0">=</span><span class="st0">'?'</span><span class="sy0">,</span> action <span class="sy0">=</span> <span class="st0">&quot;store&quot;</span><span class="sy0">,</span> default <span class="sy0">=</span> <span class="kw2">None</span><span class="sy0">,</span> <span class="kw2">help</span> <span class="sy0">=</span> <span class="st0">'the input file, if no file is provided, the script will run tests instead'</span><span class="br0">&#41;</span>
	<span class="kw3">parser</span>.<span class="me1">add_argument</span><span class="br0">&#40;</span><span class="st0">'outfile'</span><span class="sy0">,</span> nargs<span class="sy0">=</span><span class="st0">'?'</span><span class="sy0">,</span> action <span class="sy0">=</span> <span class="st0">&quot;store&quot;</span><span class="sy0">,</span> default <span class="sy0">=</span> <span class="kw2">None</span><span class="sy0">,</span> <span class="kw2">help</span> <span class="sy0">=</span> <span class="st0">'the output file, default is stdout'</span><span class="br0">&#41;</span>
	<span class="kw3">parser</span>.<span class="me1">add_argument</span><span class="br0">&#40;</span><span class="st0">'-v'</span><span class="sy0">,</span> <span class="st0">'--version'</span><span class="sy0">,</span> action <span class="sy0">=</span> <span class="st0">'version'</span><span class="sy0">,</span> version <span class="sy0">=</span> programVersion<span class="br0">&#41;</span>
	args <span class="sy0">=</span> <span class="kw3">parser</span>.<span class="me1">parse_args</span><span class="br0">&#40;</span><span class="br0">&#41;</span>
&nbsp;
	<span class="kw1">if</span> args.<span class="me1">infile</span>:
		input_text <span class="sy0">=</span> <span class="kw2">open</span><span class="br0">&#40;</span>args.<span class="me1">infile</span><span class="sy0">,</span> <span class="st0">'r'</span><span class="br0">&#41;</span>.<span class="me1">readlines</span><span class="br0">&#40;</span><span class="br0">&#41;</span>
&nbsp;
		<span class="kw1">try</span>:
			output_file <span class="sy0">=</span> <span class="kw2">open</span><span class="br0">&#40;</span>args.<span class="me1">outfile</span><span class="sy0">,</span> <span class="st0">'w'</span><span class="br0">&#41;</span>
		<span class="kw1">except</span> <span class="kw2">TypeError</span>:
			output_file <span class="sy0">=</span> <span class="kw3">sys</span>.<span class="me1">stdout</span>
&nbsp;
		checker<span class="sy0">,</span> errorNumber <span class="sy0">=</span> SyllableChecker<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">,</span> <span class="nu0">0</span>
		<span class="kw1">for</span> i<span class="sy0">,</span> line <span class="kw1">in</span> <span class="kw2">enumerate</span><span class="br0">&#40;</span>input_text<span class="br0">&#41;</span>:
			<span class="kw1">if</span> <span class="kw1">not</span> checker.<span class="me1">stringContainsOnlyValidKarenSyllables</span><span class="br0">&#40;</span>line<span class="br0">&#41;</span>:
				errorNumber +<span class="sy0">=</span> <span class="nu0">1</span>
				output_file.<span class="me1">write</span><span class="br0">&#40;</span><span class="st0">&quot;Error #{}: Spelling Error: Line {}:<span class="es0">\n</span>{}<span class="es0">\n</span>&quot;</span>.<span class="me1">format</span><span class="br0">&#40;</span>errorNumber<span class="sy0">,</span> i + <span class="nu0">1</span><span class="sy0">,</span> checker.<span class="me1">getLastSyllableReport</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>
		output_file.<span class="me1">close</span><span class="br0">&#40;</span><span class="br0">&#41;</span>
&nbsp;
	<span class="kw1">else</span>:
		<span class="kw3">test</span><span class="br0">&#40;</span><span class="br0">&#41;</span></pre>
</dd></dl>
<dl class="file">
<dt><a href="/_export/code/development/scripts?codeblock=2" title="Download Snippet" class="mediafile mf_py">sgkconvertknu.py</a></dt>
<dd><pre class="code file python"><span class="co1">#!/usr/bin/env/ python3</span>
<span class="co1"># -*- coding: utf-8 -*-</span>
<span class="st0">&quot;&quot;&quot;
~/.scripts/sgkconvertknu.py
the following script can be used in two modes, either as a python
module, or as a commandline utility.
as a commandline utility:
	usage: kconvertknu.py [-h] [-v] [infile] [outfile]
&nbsp;
	this program takes a file written in Sgaw Karen KNU font, and converts it into
	Karen unicode
&nbsp;
	positional arguments:
	  infile         the input file, if no file is provided, the script will run
					 tests instead
	  outfile        the output file, if output is not provided, the input file
					 will be overwriten
&nbsp;
	optional arguments:
	  -h, --help     show this help message and exit
	  -v, --version  show program's version number and exit
&nbsp;
	this script was written by Ben Sharon
&nbsp;
as a python module:
	converter(input_str)
	this function takes an input_str contianing Karen text encoded with the KNU font,
	and returns a string with characters swaped to the coresponding unicode character.
	the proccess isn't perfect, because there is not a 100% 1 to 1 relationship
	between the two encodings. it is recommended to run the preprosessor first.
	that will improve the situation, although there is still some ambiguity. the
	following is a list of some of the known ambiguities:
&nbsp;
		* wa followed by plersee (is a number and a colon, or the syllable 'wa')
&nbsp;
	preprocessor(input_str)
	this funciton takes an input string and returns a string with some preprocessing in
	preparation for converter()
&nbsp;
&nbsp;
&quot;&quot;&quot;</span>
&nbsp;
prog_version <span class="sy0">=</span> <span class="st0">'1.1'</span>
&nbsp;
<span class="kw1">import</span> <span class="kw3">re</span>
&nbsp;
<span class="kw1">def</span> converter<span class="br0">&#40;</span>input_str<span class="br0">&#41;</span>:
	char_map <span class="sy0">=</span> <span class="br0">&#123;</span>
		<span class="st0">&quot;H&quot;</span>: <span class="st0">&quot;ံ&quot;</span><span class="sy0">,</span> <span class="st0">&quot;h&quot;</span>: <span class="st0">&quot;့&quot;</span><span class="sy0">,</span> <span class="st0">&quot;;&quot;</span>: <span class="st0">&quot;း&quot;</span><span class="sy0">,</span> <span class="st0">&quot;=&quot;</span>: <span class="st0">&quot;-&quot;</span><span class="sy0">,</span> <span class="st0">&quot;&lt;&quot;</span>: <span class="st0">&quot;,&quot;</span><span class="sy0">,</span>
		<span class="st0">&quot;I&quot;</span>: <span class="st0">&quot;.&quot;</span><span class="sy0">,</span> <span class="st0">&quot;$&quot;</span>: <span class="st0">&quot;.&quot;</span><span class="sy0">,</span> <span class="st0">&quot;“&quot;</span>: <span class="st0">&quot;“&quot;</span><span class="sy0">,</span> <span class="st0">&quot;?&quot;</span>: <span class="st0">&quot;“&quot;</span><span class="sy0">,</span>
		<span class="st0">&quot;/&quot;</span>: <span class="st0">&quot;”&quot;</span><span class="sy0">,</span> <span class="st0">&quot;A&quot;</span>: <span class="st0">&quot; &quot;</span><span class="sy0">,</span> <span class="st0">&quot;:&quot;</span>: <span class="st0">&quot;★&quot;</span><span class="sy0">,</span> <span class="st0">&quot;0&quot;</span>: <span class="st0">&quot;၀&quot;</span><span class="sy0">,</span>
		<span class="st0">&quot;1&quot;</span>: <span class="st0">&quot;၁&quot;</span><span class="sy0">,</span> <span class="st0">&quot;2&quot;</span>: <span class="st0">&quot;၂&quot;</span><span class="sy0">,</span> <span class="st0">&quot;3&quot;</span>: <span class="st0">&quot;၃&quot;</span><span class="sy0">,</span> <span class="st0">&quot;4&quot;</span>: <span class="st0">&quot;၄&quot;</span><span class="sy0">,</span> <span class="st0">&quot;5&quot;</span>: <span class="st0">&quot;၅&quot;</span><span class="sy0">,</span>
		<span class="st0">&quot;6&quot;</span>: <span class="st0">&quot;၆&quot;</span><span class="sy0">,</span> <span class="st0">&quot;7&quot;</span>: <span class="st0">&quot;၇&quot;</span><span class="sy0">,</span> <span class="st0">&quot;8&quot;</span>: <span class="st0">&quot;၈&quot;</span><span class="sy0">,</span> <span class="st0">&quot;9&quot;</span>: <span class="st0">&quot;၉&quot;</span><span class="sy0">,</span> <span class="st0">&quot;u&quot;</span>: <span class="st0">&quot;က&quot;</span><span class="sy0">,</span>
		<span class="st0">&quot;c&quot;</span>: <span class="st0">&quot;ခ&quot;</span><span class="sy0">,</span> <span class="st0">&quot;*&quot;</span>: <span class="st0">&quot;ဂ&quot;</span><span class="sy0">,</span> <span class="st0">&quot;C&quot;</span>: <span class="st0">&quot;ဃ&quot;</span><span class="sy0">,</span> <span class="st0">&quot;]&quot;</span>: <span class="st0">&quot;င&quot;</span><span class="sy0">,</span> <span class="st0">&quot;p&quot;</span>: <span class="st0">&quot;စ&quot;</span><span class="sy0">,</span>
		<span class="st0">&quot;q&quot;</span>: <span class="st0">&quot;ဆ&quot;</span><span class="sy0">,</span> <span class="st0">&quot;Z&quot;</span>: <span class="st0">&quot;ဇ&quot;</span><span class="sy0">,</span> <span class="st0">&quot;n&quot;</span>: <span class="st0">&quot;ည&quot;</span><span class="sy0">,</span> <span class="st0">&quot;!&quot;</span>: <span class="st0">&quot;ည&quot;</span><span class="sy0">,</span> <span class="st0">&quot;w&quot;</span>: <span class="st0">&quot;တ&quot;</span><span class="sy0">,</span>
		<span class="st0">&quot;x&quot;</span>: <span class="st0">&quot;ထ&quot;</span><span class="sy0">,</span> <span class="st0">&quot;'&quot;</span>: <span class="st0">&quot;ဒ&quot;</span><span class="sy0">,</span> <span class="st0">&quot;e&quot;</span>: <span class="st0">&quot;န&quot;</span><span class="sy0">,</span> <span class="st0">&quot;E&quot;</span>: <span class="st0">&quot;န&quot;</span><span class="sy0">,</span> <span class="st0">&quot;M&quot;</span>: <span class="st0">&quot;န့&quot;</span><span class="sy0">,</span>
		<span class="st0">&quot;y&quot;</span>: <span class="st0">&quot;ပ&quot;</span><span class="sy0">,</span> <span class="st0">&quot;z&quot;</span>: <span class="st0">&quot;ဖ&quot;</span><span class="sy0">,</span> <span class="st0">&quot;b&quot;</span>: <span class="st0">&quot;ဘ&quot;</span><span class="sy0">,</span> <span class="st0">&quot;r&quot;</span>: <span class="st0">&quot;မ&quot;</span><span class="sy0">,</span> <span class="st0">&quot;,&quot;</span>: <span class="st0">&quot;ယ&quot;</span><span class="sy0">,</span>
		<span class="st0">&quot;s&quot;</span>: <span class="st0">&quot;ျ&quot;</span><span class="sy0">,</span> <span class="st0">&quot;V&quot;</span>: <span class="st0">&quot;ျ့&quot;</span><span class="sy0">,</span> <span class="st0">&quot;%&quot;</span>: <span class="st0">&quot;ရ&quot;</span><span class="sy0">,</span> <span class="st0">&quot;&amp;&quot;</span>: <span class="st0">&quot;ရ&quot;</span><span class="sy0">,</span> <span class="st0">&quot;j&quot;</span>: <span class="st0">&quot;ြ&quot;</span><span class="sy0">,</span>
		<span class="st0">&quot;}&quot;</span>: <span class="st0">&quot;ြ&quot;</span><span class="sy0">,</span> <span class="st0">&quot;-&quot;</span>: <span class="st0">&quot;ြ&quot;</span><span class="sy0">,</span> <span class="st0">&quot;_&quot;</span>: <span class="st0">&quot;ြ&quot;</span><span class="sy0">,</span> <span class="st0">&quot;v&quot;</span>: <span class="st0">&quot;လ&quot;</span><span class="sy0">,</span> <span class="st0">&quot;F&quot;</span>: <span class="st0">&quot;ၠ&quot;</span><span class="sy0">,</span>
		<span class="st0">&quot;G&quot;</span>: <span class="st0">&quot;ွ&quot;</span><span class="sy0">,</span><span class="st0">&quot;U&quot;</span>: <span class="st0">&quot;ွ့&quot;</span><span class="sy0">,</span> <span class="st0">&quot;o&quot;</span>: <span class="st0">&quot;သ&quot;</span><span class="sy0">,</span> <span class="st0">&quot;[&quot;</span>: <span class="st0">&quot;ဟ&quot;</span><span class="sy0">,</span> <span class="st0">&quot;O&quot;</span>: <span class="st0">&quot;ှ့&quot;</span><span class="sy0">,</span>
		<span class="st0">&quot;+&quot;</span>: <span class="st0">&quot;ှု&quot;</span><span class="sy0">,</span> <span class="st0">&quot;t&quot;</span>: <span class="st0">&quot;အ&quot;</span><span class="sy0">,</span> <span class="st0">&quot;{&quot;</span>: <span class="st0">&quot;ဧ&quot;</span><span class="sy0">,</span> <span class="st0">&quot;g&quot;</span>: <span class="st0">&quot;ါ&quot;</span><span class="sy0">,</span> <span class="st0">&quot;m&quot;</span>: <span class="st0">&quot;ာ်&quot;</span><span class="sy0">,</span>
		<span class="st0">&quot;d&quot;</span>: <span class="st0">&quot;ိ&quot;</span><span class="sy0">,</span> <span class="st0">&quot;D&quot;</span>: <span class="st0">&quot;ီ&quot;</span><span class="sy0">,</span> <span class="st0">&quot;k&quot;</span>: <span class="st0">&quot;ု&quot;</span><span class="sy0">,</span> <span class="st0">&quot;K&quot;</span>: <span class="st0">&quot;ု&quot;</span><span class="sy0">,</span> <span class="st0">&quot;l&quot;</span>: <span class="st0">&quot;ူ&quot;</span><span class="sy0">,</span>
		<span class="st0">&quot;L&quot;</span>: <span class="st0">&quot;ူ&quot;</span><span class="sy0">,</span> <span class="st0">&quot;J&quot;</span>: <span class="st0">&quot;ဲ&quot;</span><span class="sy0">,</span> <span class="st0">&quot;X&quot;</span>: <span class="st0">&quot;ၢ&quot;</span><span class="sy0">,</span> <span class="st0">&quot;&gt;&quot;</span>: <span class="st0">&quot;ၢ်&quot;</span><span class="sy0">,</span> <span class="st0">&quot;f&quot;</span>: <span class="st0">&quot;်&quot;</span><span class="sy0">,</span>
		<span class="st0">&quot;.&quot;</span>: <span class="st0">&quot;ၣ်&quot;</span><span class="sy0">,</span> <span class="st0">&quot;R&quot;</span>: <span class="st0">&quot;ၤ&quot;</span><span class="sy0">,</span> <span class="st0">&quot;]&quot;</span>: <span class="st0">&quot;=&quot;</span><span class="sy0">,</span> <span class="st0">&quot;S&quot;</span>: <span class="st0">&quot;ှ&quot;</span><span class="sy0">,</span>
		<span class="st0">&quot;<span class="es0">\u</span>1AFD&quot;</span>: <span class="st0">&quot;:&quot;</span><span class="sy0">,</span> <span class="st0">&quot; &quot;</span>: <span class="st0">&quot;<span class="es0">\u</span>200B&quot;</span>
	<span class="br0">&#125;</span>
&nbsp;
	output_str <span class="sy0">=</span> <span class="st0">&quot;&quot;</span>
	<span class="kw1">for</span> char <span class="kw1">in</span> input_str:
		<span class="kw1">try</span>:
			output_str +<span class="sy0">=</span> char_map<span class="br0">&#91;</span>char<span class="br0">&#93;</span>
		<span class="kw1">except</span> <span class="kw2">KeyError</span>:
			output_str +<span class="sy0">=</span> char
	<span class="kw1">return</span> output_str
&nbsp;
<span class="kw1">def</span> preprocessor<span class="br0">&#40;</span>knu_str<span class="br0">&#41;</span>:
	regex_rules <span class="sy0">=</span> <span class="br0">&#40;</span>
		<span class="br0">&#40;</span><span class="st0">&quot;([j}_-])(.)&quot;</span><span class="sy0">,</span> <span class="st0">&quot;<span class="es0">\\</span>2<span class="es0">\\</span>1&quot;</span><span class="br0">&#41;</span><span class="sy0">,</span> 
		<span class="co1"># Switch any ra's with the next character</span>
&nbsp;
		<span class="br0">&#40;</span><span class="st0">&quot;0([dfghjklm.RSDFGHJX&gt;])&quot;</span><span class="sy0">,</span> <span class="st0">&quot;ဝ<span class="es0">\\</span>1&quot;</span><span class="br0">&#41;</span><span class="sy0">,</span>
		<span class="co1"># Change any wa's that appear to be part of a syllable ahead of</span>
		<span class="co1"># time. This will fix most of them, however, there is still an</span>
		<span class="co1"># ambiguity with wa's followed by plersee because knu also uses</span>
		<span class="co1"># plersee between numbers</span>
&nbsp;
		<span class="br0">&#40;</span><span class="st0">&quot;([1234567890]);&quot;</span><span class="sy0">,</span> <span class="st0">&quot;<span class="es0">\\</span>1<span class="es0">\u</span>1AFD&quot;</span><span class="br0">&#41;</span>
		<span class="co1"># Change any plersee following a number (other than zero,</span>
		<span class="co1"># because that's ambiguous) into an intermediate \u1AFD which</span>
		<span class="co1"># will then be changed into a colon in the main converter stage</span>
	<span class="br0">&#41;</span>
&nbsp;
	<span class="kw1">for</span> pat<span class="sy0">,</span> repl <span class="kw1">in</span> regex_rules:
		knu_str <span class="sy0">=</span> <span class="kw3">re</span>.<span class="me1">sub</span><span class="br0">&#40;</span>pat<span class="sy0">,</span> repl<span class="sy0">,</span> knu_str<span class="br0">&#41;</span>
&nbsp;
	<span class="kw1">return</span> knu_str
&nbsp;
&nbsp;
<span class="kw1">def</span> <span class="kw3">test</span><span class="br0">&#40;</span><span class="br0">&#41;</span>:
	<span class="kw1">import</span> <span class="kw3">unittest</span>
	<span class="kw1">class</span> TestSequenceFunctions<span class="br0">&#40;</span><span class="kw3">unittest</span>.<span class="me1">TestCase</span><span class="br0">&#41;</span>:
&nbsp;
		<span class="kw1">def</span> test_preprocessor_ra_switcher<span class="br0">&#40;</span><span class="kw2">self</span><span class="br0">&#41;</span>:
			<span class="kw2">self</span>.<span class="me1">assertEqual</span><span class="br0">&#40;</span><span class="st0">&quot;uj&quot;</span><span class="sy0">,</span> preprocessor<span class="br0">&#40;</span><span class="st0">&quot;ju&quot;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>
&nbsp;
		<span class="kw1">def</span> test_preprocessor_wa_fixer<span class="br0">&#40;</span><span class="kw2">self</span><span class="br0">&#41;</span>:
			<span class="kw2">self</span>.<span class="me1">assertEqual</span><span class="br0">&#40;</span><span class="st0">&quot;ဝg&quot;</span><span class="sy0">,</span> preprocessor<span class="br0">&#40;</span><span class="st0">&quot;0g&quot;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>
&nbsp;
	suite <span class="sy0">=</span> <span class="kw3">unittest</span>.<span class="me1">TestLoader</span><span class="br0">&#40;</span><span class="br0">&#41;</span>.<span class="me1">loadTestsFromTestCase</span><span class="br0">&#40;</span>TestSequenceFunctions<span class="br0">&#41;</span>
	<span class="kw3">unittest</span>.<span class="me1">TextTestRunner</span><span class="br0">&#40;</span>verbosity <span class="sy0">=</span> <span class="nu0">2</span><span class="br0">&#41;</span>.<span class="me1">run</span><span class="br0">&#40;</span>suite<span class="br0">&#41;</span>
&nbsp;
&nbsp;
<span class="kw1">if</span> __name__ <span class="sy0">==</span> <span class="st0">&quot;__main__&quot;</span>:
	<span class="kw1">import</span> argparse<span class="sy0">,</span> <span class="kw3">sys</span>
&nbsp;
	<span class="kw3">parser</span> <span class="sy0">=</span> argparse.<span class="me1">ArgumentParser</span><span class="br0">&#40;</span>
	   description <span class="sy0">=</span> <span class="st0">'this program takes a file written in Sgaw Karen KNU font, and converts it into Karen unicode'</span><span class="sy0">,</span>
	   epilog <span class="sy0">=</span> <span class="st0">'this script was written by Ben Sharon'</span><span class="br0">&#41;</span>
	<span class="kw3">parser</span>.<span class="me1">add_argument</span><span class="br0">&#40;</span><span class="st0">'infile'</span><span class="sy0">,</span> nargs<span class="sy0">=</span><span class="st0">'?'</span><span class="sy0">,</span> action <span class="sy0">=</span> <span class="st0">&quot;store&quot;</span><span class="sy0">,</span> default <span class="sy0">=</span> <span class="kw2">None</span><span class="sy0">,</span> <span class="kw2">help</span> <span class="sy0">=</span> <span class="st0">'the input file, if no file is provided, the script will run tests instead'</span><span class="br0">&#41;</span>
	<span class="kw3">parser</span>.<span class="me1">add_argument</span><span class="br0">&#40;</span><span class="st0">'outfile'</span><span class="sy0">,</span> nargs<span class="sy0">=</span><span class="st0">'?'</span><span class="sy0">,</span> action <span class="sy0">=</span> <span class="st0">&quot;store&quot;</span><span class="sy0">,</span> default <span class="sy0">=</span> <span class="kw2">None</span><span class="sy0">,</span> <span class="kw2">help</span> <span class="sy0">=</span> <span class="st0">'the output file, if output is not provided, the input file will be overwriten'</span><span class="br0">&#41;</span>
	<span class="kw3">parser</span>.<span class="me1">add_argument</span><span class="br0">&#40;</span><span class="st0">'-v'</span><span class="sy0">,</span> <span class="st0">'--version'</span><span class="sy0">,</span> action <span class="sy0">=</span> <span class="st0">'version'</span><span class="sy0">,</span> version <span class="sy0">=</span> prog_version<span class="br0">&#41;</span>
	args <span class="sy0">=</span> <span class="kw3">parser</span>.<span class="me1">parse_args</span><span class="br0">&#40;</span><span class="br0">&#41;</span>
&nbsp;
	<span class="kw1">if</span> args.<span class="me1">infile</span>:
		file_text <span class="sy0">=</span> <span class="kw2">open</span><span class="br0">&#40;</span>args.<span class="me1">infile</span><span class="sy0">,</span> <span class="st0">'r'</span><span class="sy0">,</span> encoding<span class="sy0">=</span><span class="st0">'utf-8'</span><span class="br0">&#41;</span>.<span class="me1">read</span><span class="br0">&#40;</span><span class="br0">&#41;</span>
		file_text <span class="sy0">=</span> preprocessor<span class="br0">&#40;</span>file_text<span class="br0">&#41;</span>
		file_text <span class="sy0">=</span> converter<span class="br0">&#40;</span>file_text<span class="br0">&#41;</span>
&nbsp;
		<span class="kw1">if</span> args.<span class="me1">outfile</span>:
			<span class="kw2">open</span><span class="br0">&#40;</span>args.<span class="me1">outfile</span><span class="sy0">,</span> <span class="st0">'w'</span><span class="sy0">,</span> encoding<span class="sy0">=</span><span class="st0">'utf-8'</span><span class="br0">&#41;</span>.<span class="me1">write</span><span class="br0">&#40;</span>file_text<span class="br0">&#41;</span>
		<span class="kw1">else</span>:
			<span class="kw2">open</span><span class="br0">&#40;</span>args.<span class="me1">infile</span><span class="sy0">,</span> <span class="st0">'w'</span><span class="sy0">,</span> encoding<span class="sy0">=</span><span class="st0">'utf-8'</span><span class="br0">&#41;</span>.<span class="me1">write</span><span class="br0">&#40;</span>file_text<span class="br0">&#41;</span>
&nbsp;
	<span class="kw1">else</span>:
		<span class="kw3">test</span><span class="br0">&#40;</span><span class="br0">&#41;</span></pre>
</dd></dl>
</div>

</div>
</body>
</html>
